var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(p){return p.raw=p};$jscomp.createTemplateTagFirstArgWithRaw=function(p,k){p.raw=k;return p};
$(function(){function p(a,b,g){"success"===b||1>g.length?a.classList.contains("error")&&a.classList.remove("error"):"error"===b&&0<g.length&&a.classList.add("error")}function k(a){a=$(a).parent().children(".popup");var b=a.children(".popup_message");a.stop().animate({opacity:0},300,function(){$(this).css({display:"none"});b.children().remove()})}function n(a,b){if(0<b.length){a=$(a).parent().children(".popup");var g=a.children(".popup_message");g.children().remove();for(var c=0;c<b.length;c++){var d=
document.createElement("span");d.classList.add("popup_message-text");d.textContent=b[c];g.append(d)}a.css({display:"block",opacity:0}).stop().animate({opacity:1},300)}else k(a)}function y(a,b){b=b.prop("id");if("name"===b||"surname"===b||"patronymic"===b)!(e.name||e.surname||e.patronymic)||f.name||f.surname||f.patronymic?a.prop({disabled:!0}):a.prop({disabled:!1});else if("birthdate"===b)e.birthdate?a.prop({disabled:!1}):a.prop({disabled:!0});else if("email"===b||"password_for_email"===b)e.email&&
e.password_for_email?a.prop({disabled:!1}):a.prop({disabled:!0});else if("email_code"===b)e.email_code?a.prop({disabled:!1}):a.prop({disabled:!0});else if("username"===b)e.username?a.prop({disabled:!1}):a.prop({disabled:!0});else if("password_old"===b||"password1"===b||"password2"===b)e.password_old&&e.password1&&e.password2?a.prop({disabled:!1}):a.prop({disabled:!0});else throw Error("Unexpected values");}function m(a,b,g){var c=a[0].id;"password_old"===c?(e.password_old=0<g.password_old.length,
k(a),y(b,a)):"password_for_email"===c?(e.password_for_email=0<g.password_for_email.length,k(a),y(b,a)):"email_code"===c?(e.email_code=0<g.email_code.length,k(a),y(b,a)):$.ajax({url:"/edit/check_input/"+c,type:"post",data:{csrfmiddlewaretoken:r,id:c,values:g},success:function(d){"password_old"!==c&&p(a[0],d.resultStatus,d.resultError);if("name"===c)"success"===d.resultStatus?(e.name=!0,f.name=!1,k(a)):"error"===d.resultStatus&&(e.name=!1,f.name=0<d.resultError.length,n(a,d.resultError));else if("surname"===
c)"success"===d.resultStatus?(e.surname=!0,f.surname=!1,k(a)):"error"===d.resultStatus&&(e.surname=!1,f.surname=0<d.resultError.length,n(a,d.resultError));else if("patronymic"===c)"success"===d.resultStatus?(e.patronymic=!0,f.patronymic=!1,k(a)):"error"===d.resultStatus&&(e.patronymic=!1,f.patronymic=0<d.resultError.length,n(a,d.resultError));else if("birthdate"===c)"success"===d.resultStatus?(e.birthdate=!0,f.birthdate=!1,k(a)):"error"===d.resultStatus&&(e.birthdate=!1,f.birthdate=0<d.resultError.length,
n(a,d.resultError));else if("email"===c)"success"===d.resultStatus?(e.email=!0,f.email=!1,k(a)):"error"===d.resultStatus&&(e.email=!1,f.email=0<d.resultError.length,n(a,d.resultError));else if("username"===c)"success"===d.resultStatus?(e.username=!0,f.username=!1,k(a)):"error"===d.resultStatus&&(e.username=!1,f.username=0<d.resultError.length,n(a,d.resultError));else if("password_old"===c)console.log("\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c");else if("password1"===
c)console.log(d),t.val(""),e.password2=!1,f.password2=!1,k(t),"success"===d.resultStatus?(e.password1=!0,f.password1=!1,k(a),$("#password2").prop({disabled:!1})):"error"===d.resultStatus&&(e.password1=!1,f.password1=!0,n(a,d.resultError),$("#password2").prop({disabled:!0}));else if("password2"===c)"success"===d.resultStatus?(e.password2=!0,f.password2=!1,k(a)):"error"===d.resultStatus&&(e.password2=!1,f.password2=!0,n(a,d.resultError));else throw Error("Unexpected values");y(b,a)},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");
},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");
}})}function M(){680>=parseFloat(z.width())+parseFloat(z.css("margin-left"))+parseFloat(z.css("margin-right"))+30+parseFloat(A.width())?A.css({position:"absolute",right:"0",bottom:"calc(100% + 14px)"}):A.css({position:"static"});A.removeClass("hide")}var h=$("body"),r=$('input[name="csrfmiddlewaretoken"]').val();$(".col-center");var C=$(".modal"),D=$("#email_code"),Y=$("#modal_success"),N=$(".left-content__photo"),Z=$(".upd-photo"),O=$(".head-menu-img"),aa=$("#username"),u=$("#password_old"),E=$("#password1"),
t=$("#password2"),B=$("#email"),v=$("#password_for_email"),P=$("#name"),Q=$("#surname"),R=$("#patronymic"),x=$("#birthdate"),F=$("#btnName"),G=$("#btnPassword"),S=$("#btnBirthdate"),ba=$("#btnUsername"),T=$("#btnEmail"),z=$(".info__name"),A=$(".info__company"),U=$(".position__substrate"),V=$(".platform__substrate"),H=U.children("._hint-down-click").children("._hint-down-block").children(".menu"),I=V.children("._hint-down-click").children("._hint-down-block").children(".menu"),W,e={username:!1,password_old:!1,
password1:!1,password2:!1,email:!1,password_for_email:!1,email_code:!1,name:!1,surname:!1,patronymic:!1,birthdate:!1},f={username:!1,password_old:!1,password1:!1,password2:!1,email:!1,password_for_email:!1,email_code:!1,name:!1,surname:!1,patronymic:!1,birthdate:!1};M();"date"!==x.prop("type")&&x.datepicker({onSelect:function(a,b,g){m(x,S,{birthdate:a})},dateFormat:"d.m.yyyy",position:"top left"});h.on("click",".left-content__delete-photo",function(a){a.preventDefault();$.ajax({url:"edit/photo/delete",
type:"post",data:{csrfmiddlewaretoken:r},success:function(b){console.log(b.new_photo_url);$(N).attr({src:b.new_photo_url});$(O).attr({src:b.new_photo_url})},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");
},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}})});h.on("click",".left-content__update-photo",function(a){a.preventDefault();$(Z).trigger("click")});h.on("change",".upd-photo",function(){var a=this.files;console.log(a);if("undefined"!=
typeof a){var b=new FormData;$.each(a,function(g,c){b.append(g,c)});console.log(b);$.ajax({url:"edit/photo/update",type:"post",data:{data:b,csrfmiddlewaretoken:r},cache:!1,processData:!1,contentType:!1,success:function(g){console.log(g.new_photo_url);$(N).attr({src:g.new_photo_url});$(O).attr({src:g.new_photo_url})},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");
},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}})}});h.on("click",".modal",function(a){if($(a.target).hasClass("modal")||
"modal_close"===a.target.id)sessionStorage.removeItem("new_email"),C.toggleClass("hide")});h.on("focus",".input-field",function(){var a=$(this)[0].id,b;for(b in f)if(b===a)if(f[b])$(this).parent().children(".popup").css({display:"block",opacity:0}).stop().animate({opacity:1},300);else break});h.on("focusout",".input-field",function(){$(this).parent().children(".popup").stop().animate({opacity:0},300,function(){$(this).css({display:"none"})})});h.on("input",".input-field",function(a){a=$(this)[0].id;
console.log(a);if("password_old"===a||"password_for_email"===a){var b=$(this).parent().children(".popup");b.addClass("old");$(this).removeClass("error");b.stop().animate({opacity:0},300,function(){$(this).remove()});"password_old"===a?f.password_old=!1:"password_for_email"===a&&(f.password_for_email=!1)}});h.on("input","#username",function(){$(this).val($(this).val().toLowerCase());var a=$(this);m(a,ba,{username:a.val()})});h.on("input","#password_old",function(){var a=$(this);m(a,G,{password_old:a.val()})});
h.on("input","#password1",function(){var a=$(this);m(a,G,{password_old:u.val(),password1:a.val(),password2:t.val()})});h.on("input","#password2",function(){var a=$(this);m(a,G,{password1:E.val(),password2:a.val()})});h.on("input","#email",function(){var a=$(this);m(a,T,{email:a.val()})});h.on("input","#password_for_email",function(){var a=$(this);m(a,T,{password_for_email:a.val()})});h.on("input","#email_code",function(){var a=$(this);m(a,Y,{email_code:a.val()})});h.on("input","#name",function(){var a=
$(this);m(a,F,{name:a.val()})});h.on("input","#surname",function(){var a=$(this);m(a,F,{surname:a.val()})});h.on("input","#patronymic",function(){var a=$(this);m(a,F,{patronymic:a.val()})});h.on("input","#birthdate",function(){var a=$(this);m(a,S,{birthdate:a.val()})});h.on("click",".button-save",function(a){var b=$(this).attr("data-part-url");if("name"===b)var g={name:P.val(),surname:Q.val(),patronymic:R.val()};else if("birthdate"===b)g={birthdate:x.val()};else if("email"===b)g={email:B.val(),password_for_email:v.val()};
else if("email_code"===b)g={email:sessionStorage.getItem("new_email"),email_code:D.val()};else if("username"===b)g={username:aa.val()};else if("password"===b)g={password_old:u.val(),password1:E.val(),password2:t.val()};else throw Error("Unexpected argument values");$.ajax({url:"edit/save/"+b,type:"post",data:{csrfmiddlewaretoken:r,values:g},success:function(c){$(a.target).prop({disabled:!0});var d=$(a.target).parent(),l=d.children(".setting__substrate").children(".setting__value");d=d.parent().parent().parent().children(".setting__close").children(".setting__mini").children(".setting__2-block").children(".setting__value");
if("name"===b)P.val(c.name),Q.val(c.surname),R.val(c.patronymic),z.text(c.name+" "+c.surname),M(),l.text(c.surname+" "+c.name+" "+c.patronymic),d.text(c.surname+" "+c.name+" "+c.patronymic),$(".head-menu-name").text(c.name+" "+c.surname),e.name=!1,e.surname=!1,e.patronymic=!1,f.name=!1,f.surname=!1,f.patronymic=!1;else if("birthdate"===b)x.val(c.birthdate.date),l.text(""+c.birthdate.text),d.text(""+c.birthdate.text),e.birthdate=!1,f.birthdate=!1;else if("email"===b)v.val(""),e.password_for_email=
!1,f.password_for_email=!1,"error"===c.resultStatus?(e.email=!0,f.email=!1,f.password_for_email=!0,p(v[0],c.resultStatus,c.listErrors.password_for_email),n(v,c.listErrors.password_for_email),v.focus()):"success"===c.resultStatus&&(e.email=!1,f.email=!1,sessionStorage.setItem("new_email",B.val()),B.val(""),C.toggleClass("hide"));else if("email_code"===b)"error"===c.resultStatus?(f.email_code=!0,p(D[0],c.resultStatus,c.listErrors),n(D,c.listErrors),v.focus()):"success"===c.resultStatus&&(l.text(""+
c.email),d.text(""+c.email),sessionStorage.removeItem("new_email"),C.toggleClass("hide"));else if("username"===b)B.val(c.username),l.text(""+c.username),d.text(""+c.username),e.username=!1,f.username=!1;else if("password"===b)u.val(""),E.val(""),t.val(""),t.prop({disabled:!0}),e.password_old=!1,e.password1=!1,e.password2=!1,f.password_old=!1,f.password1=!1,f.password2=!1,"error"===c.resultStatus&&(f.password_old=!0,p(u[0],c.resultStatus,c.listErrors.old_password),n(u,c.listErrors.old_password),u.focus());
else throw Error("Unexpected argument values");},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");
}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}})});h.on("click",".setting__edit",function(){var a=$(this.closest(".setting")),b=a.children(".setting__close");a=a.children(".setting__open");if(b.hasClass("show")&&a.hasClass("hide"))b.removeClass("show"),b.addClass("hide"),a.removeClass("hide"),a.addClass("show");else if(b.hasClass("hide")&&a.hasClass("show"))a.removeClass("show"),a.addClass("hide"),b.removeClass("hide"),
b.addClass("show");else throw Error("Invalid attributes");});h.on("click","._hint-up-click",function(){var a=$(this.closest("._hint-click")),b=$(a).children("._hint-down-click");a.toggleClass("active");b.toggle();W=$(this).parent()});$(window).on("mouseup",function(a){var b=W;"none"===$(b).children("._hint-down-click").css("display")||null!==a.target.closest("._hint-up-click")&&null!==a.target.closest(".position__add")&&$(b).children("._hint-up-click").hasClass("position__add")||null!==a.target.closest(".platform__add")&&
$(b).children("._hint-up-click").hasClass("platform__add")||null!==a.target.closest("._hint-down-click")&&!a.target.classList.contains("item__block")||($(b).toggleClass("active"),$(b).children("._hint-down-click").toggle())});h.on("click",".item__block",function(a){var b=a.target.closest("._hint-click"),g,c=$(this).attr("data-name"),d=$(this).attr("data-id");$(b).hasClass("platform__substrate")?g="platform":$(b).hasClass("position__substrate")&&(g="position");$.ajax({url:"/edit/"+g+"/add/"+d,type:"post",
data:{csrfmiddlewaretoken:r,type:g,id:d,name:c},success:function(l){l=document.createElement("div");l.classList.add(g);$(l).attr({"data-name":c,"data-id":d});var q=document.createElement("div");q.classList.add("role");q.innerText=c;var J=document.createElement("div"),w=J.classList;w.add(g+"__remove");w.add("remove-item");w=document.createElement("div");w.classList.add("cross-in-circle");var K=document.createElement("div");K.classList.add("circle");var L=document.createElement("div");L.classList.add("line-1");
var X=document.createElement("div");X.classList.add("line-2");l.prepend(q);q.prepend(J);J.prepend(w);w.prepend(K);K.prepend(L);L.prepend(X);$(b).before(l);$(a.target).parent().remove();("platform"===g&&1>I.children(".menu__item").length||"position"===g&&1>H.children(".menu__item").length)&&$(b).addClass("hide")},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");
},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}})});h.on("click",".remove-item",
function(){if($(this).hasClass("platform__remove"))var a="platform";else if($(this).hasClass("position__remove"))a="position";else throw Error("Unexpected values");var b=$(this).parent().parent(),g=b.attr("data-name"),c=b.attr("data-id");$.ajax({url:"/edit/"+a+"/remove/"+c,type:"post",data:{csrfmiddlewaretoken:r,type:a,id:c,name:g},success:function(d){"position"===a&&1>H.children(".menu__item").length?U.removeClass("hide"):"platform"===a&&1>I.children(".menu__item").length&&V.removeClass("hide");
d=document.createElement("div");d.classList.add("menu__item");var l=document.createElement("div");l.classList.add("item__block");$(l).attr({"data-name":g,"data-id":c});l.innerText=g;var q=document.createElement("div");q.classList.add("item__line");d.prepend(q);d.prepend(l);if("platform"===a)I.prepend(d);else if("position"===a)H.prepend(d);else throw Error("Unexpected values");b.remove()},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");
},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");
}})})});

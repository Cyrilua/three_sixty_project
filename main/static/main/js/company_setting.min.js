$(function(){function f(b,c,a){if("position"!==b&&"platform"!==b)throw Error("Unexpected argument on item creation");var d=document.createElement("div");$(d).addClass("area__item");"position"===b?$(d).attr({"data-position-id":c}):"platform"===b&&$(d).attr({"data-platform-id":c});b=document.createElement("div");$(b).addClass("item__text").text(a);$(d).append(b);a=document.createElement("img");$(a).addClass("item__remove").attr({src:"/static/main/images/icon/clear-24px.svg"});$(d).append(a);return d}
var e=$("body");$('input[name="csrfmiddlewaretoken"]').val();var g=$("#companyName").val().toString(),h=$("#companyDescription").val().replace(/[\r\n]/g,"");e.on("click","#positionRemove",function(b){});e.on("click","#addPosition",function(b){var c=$("#namePosition"),a=c.val();0<a.length&&$.ajax({url:"position/add/",type:"post",data:{namePosition:a},beforeSend:function(d){$("#positions").addClass("loading")},success:function(d){$("#positions").children(".area__body").prepend(f("position",d.positionId,
a));c.val("");$(this).prop({disabled:!0})},complete:function(){$("#positions").removeClass("loading")},error:function(){Snackbar.show({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438.",textColor:"#ff0000",customClass:"custom no-animation",showAction:!1,duration:3E3})}})});e.on("click","#addPlatform",function(b){var c=
$("#namePlatform"),a=c.val();0<a.length&&$.ajax({url:"platform/add/",type:"post",data:{namePlatform:a},beforeSend:function(d){$("#platforms").addClass("loading")},success:function(d){$("#platforms").children(".area__body").prepend(f("platform",d.platformId,a));c.val("");$(this).prop({disabled:!0})},complete:function(){$("#platforms").removeClass("loading")},error:function(){Snackbar.show({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u0438.",
textColor:"#ff0000",customClass:"custom no-animation",showAction:!1,duration:3E3})}})});e.on("input","#namePosition",function(b){0<$(this).val().length?$("#addPosition").prop({disabled:!1}):$("#addPosition").prop({disabled:!0})});e.on("input","#namePlatform",function(b){0<$(this).val().length?$("#addPlatform").prop({disabled:!1}):$("#addPlatform").prop({disabled:!0})});e.on("click","#saveChanges",function(b){var c=$("#companyName").val(),a=$("#companyDescription").val();$.ajax({url:"change/",type:"post",
data:{name:c,description:a},beforeSend:function(){content.addClass("disabled")},success:function(){g=c;h=a;$("#saveChanges").prop({disabled:!0});Snackbar.show({text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b.",textColor:"#07bd00",customClass:"custom no-animation",showAction:!1,duration:3E3})},complete:function(){content.removeClass("disabled")},error:function(){Snackbar.show({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438.",
textColor:"#ff0000",customClass:"custom no-animation",showAction:!1,duration:3E3})}})});e.on("input keydown","#companyName, #companyDescription",function(b){if(13===b.keyCode)b.preventDefault();else{if("companyName"===this.id){var c=$(this).val();var a=$("#companyDescription").val()}else"companyDescription"===this.id&&(c=$("#companyName").val(),a=$(this).val());0<c.length&&0<a.length&&(a.replace(/[\r\n]/g,"")!==h||c!==g)?($("#saveChanges").prop({disabled:!1}),console.log(!1)):($("#saveChanges").prop({disabled:!0}),
console.log(!0))}})});

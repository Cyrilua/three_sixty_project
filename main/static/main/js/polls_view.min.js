var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(d){return d.raw=d};$jscomp.createTemplateTagFirstArgWithRaw=function(d,g){d.raw=g;return d};
$(function(){function d(a,b){c.hasClass("loading")||c.hasClass("full")||(c.addClass("loading"),l.addClass("disabled"),z.removeClass("hide"),b&&(A.removeClass("hide"),window.scrollTo(0,0),window.scrollTo(0,b)),console.log(a),$.ajax({url:"loading/"+n+"/",type:"get",data:{count:a,type:e,sort:B},success:function(f){""!==f.newElems&&null!==f.newElems&&(c[0].insertAdjacentHTML("beforeend",f.newElems),n=c.children(".category-item").length);f.is_last?c.addClass("full"):c.remove("full")},complete:function(){c.removeClass("loading");
l.removeClass("disabled");z.addClass("hide");b&&(A.addClass("hide"),window.scrollTo(0,0),window.scrollTo(0,b))},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");
},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}}))}function g(a,b){var f={top:a.getBoundingClientRect().top+100,left:a.getBoundingClientRect().left+30,right:a.getBoundingClientRect().right-30,bottom:a.getBoundingClientRect().bottom-
30},m={top:120,left:0,right:document.documentElement.clientWidth,bottom:document.documentElement.clientHeight};console.log(f,m);!$(a).hasClass("visible-load")&&(b||f.bottom<m.bottom&&f.top>m.top&&f.right<m.right&&f.left>m.left)&&(b=a.getAttribute("data-id"),$.ajax({url:"viewing/"+b,type:"post",data:{csrfmiddlewaretoken:u},beforeSend:function(){$(a).addClass("visible-load")},success:function(H){$(a).removeClass("no-viewed");$(a).removeClass("new-poll")},complete:function(){$(a).removeClass("visible-load")},
statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");
}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}}))}var k=$("body"),u=$('input[name="csrfmiddlewaretoken"]').val(),p=$(".templates"),C="date",D=$(".my-templates"),E=$(".my-templates-block"),F=$(".category-empty"),c=$(".category-content"),n=c.children(".category-item").length,e=$(".category-sort--active").attr("data-category"),q,h=0,r=window.scrollY;window.scrollTo(0,0);var l=$(".sort"),v=l[0].getBoundingClientRect().y,
w=v,x=$("#polls-notif"),A=$("._preloader"),z=$("._updater"),G=$(".show-new-poll"),y=$(".unshow-polls");if(0<$(".mdc-select").length){var t=new mdc.select.MDCSelect(document.querySelector(".mdc-select"));var B=t.value;t.listen("MDCSelect:change",function(){if(C!==t.value){B=C=t.value;c.children().remove();n=c.children(".category-item").length;var a=v-w;c.removeClass("full");d(3*Math.ceil(document.documentElement.clientHeight/370)+9,a);if("polls"===e){a=$(".no-viewed");for(var b=0;b<a.length;b++)g(a[b])}}})}(function(){d(3*
Math.ceil(document.documentElement.clientHeight/370)+9);if("polls"===e)for(var a=$(".no-viewed"),b=0;b<a.length;b++)g(a[b])})();k.on("click",".category",function(){if(!$(this).hasClass("category-sort--active")){l.children(".category-sort--active").removeClass("category-sort--active");$(this).addClass("category-sort--active");e=$(this).attr("data-category");c.children().remove();n=c.children(".category-item").length;var a=v-w;c.removeClass("full");d(3*Math.ceil(document.documentElement.clientHeight/
370)+9,a);if("polls"===e){a=$(".no-viewed");for(var b=0;b<a.length;b++)g(a[b])}}});k.on("click",".more",function(a){if(p.hasClass("few"))$(this).text("\u0421\u043a\u0440\u044b\u0442\u044c");else if(p.hasClass("many"))$(this).text("\u0411\u043e\u043b\u044c\u0448\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432");else throw Error("Unexpected attribute");p.toggleClass("few");p.toggleClass("many")});k.on("click",".delete",function(a){var b=$(this).parent().attr("data-id");$.ajax({url:"template/remove/",
type:"post",data:{csrfmiddlewaretoken:u,id:b},success:function(){$(a.target).parent().parent().parent().parent().remove();1>D.children(".template-item").length&&E.addClass("hide")},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");
},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}})});k.on("click",".template-new",function(){$.ajax({url:"poll/create/",type:"post",data:{csrfmiddlewaretoken:u},success:function(a){window.location.href=a.urlNewPoll},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");
},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");
}})});setInterval(function(){$.ajax({url:"new_notif",type:"get",data:{category:e},success:function(a){0<a.notifications?(x.text(a.notifications),x.removeClass("hide"),console.log(a.newElems),a.newElems&&"polls"===e&&(G.removeClass("hide"),F.addClass("hide"),y[0].insertAdjacentHTML("afterbegin",a.newElems))):x.addClass("hide")},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");
},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}})},1E3);k.on("click",".show-new-poll",
function(){$(this).addClass("hide");var a=y.children(".poll-item"),b=y.html();c[0].insertAdjacentHTML("afterbegin",b);a.remove();$(".new-poll").removeClass("new-poll");if("polls"===e)for(a=$(".no-viewed"),b=0;b<a.length;b++)g(a[b])});$(window).resize(function(){q=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);r=h;h=window.pageYOffset;r<h&&h+
document.documentElement.clientHeight+150>q&&!c.hasClass("loading")&&!c.hasClass("full")&&d(3*Math.ceil(document.documentElement.clientHeight/370)+9)});$(window).scroll(function(){q=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);r=h;h=window.pageYOffset;r<h&&h+document.documentElement.clientHeight+150>q&&!c.hasClass("loading")&&!c.hasClass("full")&&
d(3*Math.ceil(document.documentElement.clientHeight/370)+9)});$(window).scroll(function(){w=l[0].getBoundingClientRect().y});$(window).scroll(function(){if("polls"===e)for(var a=$(".no-viewed"),b=0;b<a.length;b++)g(a[b])});$(window).resize(function(){if("polls"===e)for(var a=$(".no-viewed"),b=0;b<a.length;b++)g(a[b])});k.on("click",".no-viewed",function(){g(this,!0)})});

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(e){return e.raw=e};$jscomp.createTemplateTagFirstArgWithRaw=function(e,l){e.raw=l;return e};
$(function(){function e(a,b){c.hasClass("loading")||c.hasClass("full")||(c.addClass("loading"),q.addClass("disabled"),z.removeClass("hide"),b&&(A.removeClass("hide"),window.scrollTo(0,0),window.scrollTo(0,b)),$.ajax({url:"loading/"+k+"/",type:"get",data:{count:a,type:f,sort:r},success:function(g){""!==g.newElems&&(c[0].insertAdjacentHTML("beforeend",g.newElems),k=c.children(".category-item").length);console.log(g.is_last);console.log(g.is_empty);g.is_last?c.addClass("full"):c.remove("full");g.is_empty?
u.removeClass("hide"):u.addClass("hide")},complete:function(){c.removeClass("loading");q.removeClass("disabled");z.addClass("hide");b&&(A.addClass("hide"),window.scrollTo(0,0),window.scrollTo(0,b))},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");
},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}}))}function l(a,b){var g=a.getBoundingClientRect().top+100,C=a.getBoundingClientRect().left+30,D=a.getBoundingClientRect().right-30,E=a.getBoundingClientRect().bottom-30,F=document.documentElement.clientWidth,
G=document.documentElement.clientHeight;if(b||E<G&&120<g&&D<F&&0<C)b=a.getAttribute("data-id"),$.ajax({url:"viewing/"+b,type:"post",data:{csrfmiddlewaretoken:v},success:function(L){$(a).removeClass("no-viewed");$(a).removeClass("new-poll")},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");
},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}})}var m=$("body"),v=$('input[name="csrfmiddlewaretoken"]').val(),
t=$(".templates"),B="date",H=$(".my-templates"),I=$(".my-templates-block"),u=$(".category-empty"),c=$(".category-content"),k=c.children(".category-item").length,f=$(".category-sort--active").attr("data-category"),n,d=0,h=window.scrollY,J=window.scrollY;window.scrollTo(0,0);var q=$(".sort"),w=q[0].getBoundingClientRect().y,x=w;window.scrollTo(0,J);var y=$("#polls-notif"),A=$("._preloader"),z=$("._updater"),K=$(".show-new-poll");(function(){n=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,
document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);h=d;d=window.pageYOffset;console.log(h<d,h,d);h<d&&d+document.documentElement.clientHeight+150>n&&!c.hasClass("loading")&&!c.hasClass("full")&&(console.log(!0),console.log("---"),console.log(k),console.log(r),console.log(f),e(9));if("polls"===f){for(var a=$(".no-viewed"),b=0;b<a.length;b++)l(a[b]);console.log("----------------------------------")}})();m.on("click",".category",
function(){if(!$(this).hasClass("category-sort--active")){q.children(".category-sort--active").removeClass("category-sort--active");$(this).addClass("category-sort--active");f=$(this).attr("data-category");c.children().remove();k=c.children(".category-item").length;var a=w-x;c.removeClass("full");e(9,a)}});if(0<$(".mdc-select").length){var p=new mdc.select.MDCSelect(document.querySelector(".mdc-select"));var r=p.value;p.listen("MDCSelect:change",function(){if(B!==p.value){B=p.value;console.log(p.value);
r=p.value;c.children().remove();k=c.children(".category-item").length;var a=w-x;c.removeClass("full");e(9,a)}})}m.on("click",".more",function(a){if(t.hasClass("few"))$(this).text("\u0421\u043a\u0440\u044b\u0442\u044c");else if(t.hasClass("many"))$(this).text("\u0411\u043e\u043b\u044c\u0448\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u0432");else throw Error("Unexpected attribute");t.toggleClass("few");t.toggleClass("many")});m.on("click",".delete",function(a){var b=$(this).parent().attr("data-id");
$.ajax({url:"template/remove/",type:"post",data:{csrfmiddlewaretoken:v,id:b},success:function(){$(a.target).parent().parent().parent().parent().remove();1>H.children(".template-item").length&&I.addClass("hide")},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");
},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}})});m.on("click",".template-new",
function(){$.ajax({url:"poll/create/",type:"post",data:{csrfmiddlewaretoken:v},success:function(a){window.location.href=a.urlNewPoll},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");
},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}})});setInterval(function(){$.ajax({url:"new_notif",type:"get",data:{category:f},success:function(a){0<a.notifications?(y.text(a.notifications),y.removeClass("hide"),console.log(a.newElems),
a.newElems&&"polls"===f&&(K.removeClass("hide"),u.addClass("hide"),c[0].insertAdjacentHTML("afterbegin",a.newElems))):y.addClass("hide")},statusCode:{400:function(){throw Error("Error 400 - \u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441");},403:function(){throw Error("Error 403 - \u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0451\u043d");},404:function(){throw Error("Error 404 - \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");
},500:function(){throw Error("Error 500 - \u0412\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430");}},error:function(){throw Error("\u0427\u0442\u043e - \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(");}})},1E3);m.on("click",".show-new-poll",function(){$(this).addClass("hide");var a=$(".new-poll");a.addClass("poll-item");a.removeClass("new-poll")});$(window).resize(function(){n=Math.max(document.body.scrollHeight,
document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);h=d;d=window.pageYOffset;h<d&&d+document.documentElement.clientHeight+150>n&&!c.hasClass("loading")&&!c.hasClass("full")&&(console.log(!0),console.log("---"),console.log(k),console.log(r),console.log(f),e(9))});$(window).scroll(function(){n=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,
document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);h=d;d=window.pageYOffset;h<d&&d+document.documentElement.clientHeight+150>n&&!c.hasClass("loading")&&!c.hasClass("full")&&(console.log(!0),console.log("---"),console.log(k),console.log(r),console.log(f),e(9))});$(window).scroll(function(){x=q[0].getBoundingClientRect().y});$(window).scroll(function(){if("polls"===f){for(var a=$(".no-viewed"),b=0;b<a.length;b++)l(a[b]);console.log("----------------------------------")}});
$(window).resize(function(){if("polls"===f){for(var a=$(".no-viewed"),b=0;b<a.length;b++)l(a[b]);console.log("----------------------------------")}});m.on("click",".no-viewed",function(){l(this,!0)})});

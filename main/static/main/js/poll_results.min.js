$(function(){function g(){var b=m(),e=$(".results");console.log(b);$.ajax({url:"save_as/",type:"post",data:{csrfmiddlewaretoken:n,template:b},beforeSend:function(){e.addClass("disabled")},success:function(){Snackbar.show({text:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d",showAction:!0,duration:3E3,actionText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",actionTextColor:"green"})},error:function(){Snackbar.show({text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0448\u0430\u0431\u043b\u043e\u043d\u0430",
showAction:!0,duration:3E3,actionText:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",actionTextColor:"red",customClass:"custom",onActionClick:function(c){$(c).animate({opacity:0},200,function(){g()})}})},complete:function(){e.removeClass("disabled")}})}function m(){var b=$(".poll"),e=b.children(".questions").children(".question"),c={name:b.children(".poll__name").text(),description:b.children(".poll_description").text(),questions:[],color:b.attr("data-poll-color"),countQuestion:e.length};
e.each(function(d,a){var f=$(a).attr("data-question-type");c.questions.push({id:$(a).attr("data-question-id"),serialNumber:d+1,type:f,name:$(a).children(".question__head").children(".question__name ").text()});if("radio"===f||"checkbox"===f)a=$(a).children(".question__answers").children(".answer"),c.questions[d].answers=[],c.questions[d].countAnswers=a.length,$(a).each(function(h,p){h=$(p).children(".answer__text").text();c.questions[d].answers.push(h)});else if("range"===f){a=$(a).children(".question__statistics-answers").children(".statistics-answer");
f=a.first().children(".value").text();var k=a.last().children(".value").text();c.questions[d].settingsSlider={min:f,max:k,step:Math.ceil((k-f)/a.length)}}else if("openQuestion"!==f)throw Error("unexpected attribute when receiving a poll");});return c}var l=$("body"),n=$('input[name="csrfmiddlewaretoken"]').val();(function(){$(".question__statistics-answers").each(function(b,e){b=$(e).children(".statistics-answer");var c=Math.ceil(e.offsetWidth/b.length/3*2);console.log(b.length);b.each(function(d,
a){d=$(a).children(".percent").text();d*=e.offsetHeight/100;a.style.width=c+"px";a.style.height=d+"px"})})})();l.on("click",".menu__back",function(){location.href="/polls/"});l.on("click","#saveAs",function(){g()})});

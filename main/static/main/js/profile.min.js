var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(e){return e.raw=e};$jscomp.createTemplateTagFirstArgWithRaw=function(e,h){e.raw=h;return e};
$(function(){function e(a,b){$.ajax({url:"loading",type:"get",data:{selectedCategory:b},beforeSend:function(c,f){n&&n.abort();g=null;n=c;k.addClass("loading")},success:function(c){$(".active-sort[data-category="+a+"]").removeClass("active-sort");$(".category[data-category="+b+"]").addClass("active-sort");k.children(".notifications").empty().prepend(c.content);g=b;h()},complete:function(c,f){k.removeClass("loading");"error"===f&&Snackbar.show({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445.",
textColor:"#ff0000",customClass:"custom center",showAction:!1,duration:3E3})},error:function(){g=a}})}function h(){if(!k.hasClass("loading"))for(var a=$(".no-viewed"),b=0;b<a.length;b++)x(a[b],!1)}function x(a,b){var c=a.getBoundingClientRect().top+30,f=a.getBoundingClientRect().left+30,m=a.getBoundingClientRect().right-30,p=a.getBoundingClientRect().bottom-25,q=document.documentElement.clientWidth,A=document.documentElement.clientHeight;!$(a).hasClass("visible-load")&&(b||p<A&&120<c&&m<q&&0<f)&&
(b=a.getAttribute("data-id"),$.ajax({url:"viewing/"+b,type:"post",data:{csrfmiddlewaretoken:y,category:g},beforeSend:function(){$(a).addClass("visible-load")},success:function(C){$(a).removeClass("no-viewed");$(a).removeClass("is_unshown")},complete:function(){$(a).removeClass("visible-load")},error:function(){}}))}var l=$("body"),y=$('input[name="csrfmiddlewaretoken"]').val(),B=$(".center-content-information-more-details"),r=$(".center-content-information-name"),t=$(".center-content-information-company"),
k=$(".body__bottom"),u=$("#polls-notif"),v=$("#results-notif"),w=$("#invites-notif"),z=$("#showNewNotif"),g,n,d=[];window.onbeforeunload=function(){for(var a=0;a<d.length;a++)d[a].finish||$.ajax(d[a].request)};window.onunload=function(){};$(window).resize(function(){h()});$(window).scroll(function(){h()});l.on("click",".show-new-poll",function(a){$(".is_unshown").removeClass("is_unshown");z.addClass("hide")});setInterval(function(){g&&!k.hasClass("loading")&&$.ajax({url:"new_notif/",type:"get",data:{category:g},
success:function(a){0<a.notificationsCount.polls?(u.text(a.notificationsCount.polls),u.removeClass("hide")):u.addClass("hide");0<a.notificationsCount.results?(v.text(a.notificationsCount.results),v.removeClass("hide")):v.addClass("hide");0<a.notificationsCount.invites?(w.text(a.notificationsCount.invites),w.removeClass("hide")):w.addClass("hide");a.newElems&&(z.removeClass("hide"),$(".notifications").prepend(a.content))},error:function(){}})},1E3);l.on("click",".notification__open",function(){x($(this).parent().parent()[0],
!0)});l.on("click",".category",function(a){a=$(".active-sort").attr("data-category");var b=$(this).attr("data-category");a!==b&&e(a,b)});l.on("click",".center-content-information-more-btn",function(){B.toggle();$(this).toggleClass("active-more");$(this).hasClass("active-more")?$(this).children(".center-content-information-more-btn-text").text("\u0421\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"):
$(this).children(".center-content-information-more-btn-text").text("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e")});l.on("click",".notification__close ",function(a){var b=$(this).parent().parent();a=b.attr("data-id");var c;$.ajax({url:"/notification/"+a+"/remove/",type:"post",data:{csrfmiddlewaretoken:y},beforeSend:function(f,m){if(!d[c]){c=d.length;f.abort();d.push({request:m,
finish:!1});b.addClass("hide");var p=setTimeout(function(){d[c].finish||$.ajax(m)},5E3);Snackbar.show({text:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e",customClass:"custom no-animation center",actionText:"\u041e\u0442\u043c\u0435\u043d\u0430",actionTextColor:"yellow",width:"910px",pos:"bottom-center",duration:5E3,onActionClick:function(q){clearTimeout(p);$(q).remove();d[c].finish=!0;b.removeClass("hide")}})}},success:function(f){b.remove()},
complete:function(){d[c].finish=!0},error:function(){b.removeClass("hide");Snackbar.show({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f",textColor:"#ff0000",customClass:"custom center",showAction:!1,duration:3E3})}})});(function(){$(function(){680>=parseFloat(r.width())+parseFloat(r.css("margin-left"))+parseFloat(r.css("margin-right"))+
30+parseFloat(t.width())&&t.css({position:"absolute",right:"0",bottom:"calc(100% + 14px)"});t.removeClass("hide")});$(".category[data-category=polls]").trigger("click")})()});

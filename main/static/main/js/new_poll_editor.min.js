var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(e){return e.raw=e};$jscomp.createTemplateTagFirstArgWithRaw=function(e,g){e.raw=g;return e};$jscomp.arrayIteratorImpl=function(e){var g=0;return function(){return g<e.length?{done:!1,value:e[g++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,g,h){if(e==Array.prototype||e==Object.prototype)return e;e[g]=h.value;return e};
$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var g=0;g<e.length;++g){var h=e[g];if(h&&h.Math==Math)return h}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,g){var h=$jscomp.propertyToPolyfillSymbol[g];if(null==h)return e[g];h=e[h];return void 0!==h?h:e[g]};$jscomp.polyfill=function(e,g,h,k){g&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,g,h,k):$jscomp.polyfillUnisolated(e,g,h,k))};
$jscomp.polyfillUnisolated=function(e,g,h,k){h=$jscomp.global;e=e.split(".");for(k=0;k<e.length-1;k++){var l=e[k];if(!(l in h))return;h=h[l]}e=e[e.length-1];k=h[e];g=g(k);g!=k&&null!=g&&$jscomp.defineProperty(h,e,{configurable:!0,writable:!0,value:g})};
$jscomp.polyfillIsolated=function(e,g,h,k){var l=e.split(".");e=1===l.length;k=l[0];k=!e&&k in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var q=0;q<l.length-1;q++){var x=l[q];if(!(x in k))return;k=k[x]}l=l[l.length-1];h=$jscomp.IS_SYMBOL_NATIVE&&"es6"===h?k[l]:null;g=g(h);null!=g&&(e?$jscomp.defineProperty($jscomp.polyfills,l,{configurable:!0,writable:!0,value:g}):g!==h&&($jscomp.propertyToPolyfillSymbol[l]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(l):$jscomp.POLYFILL_PREFIX+l,l=
$jscomp.propertyToPolyfillSymbol[l],$jscomp.defineProperty(k,l,{configurable:!0,writable:!0,value:g})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(e){if(e)return e;var g=function(l,q){this.$jscomp$symbol$id_=l;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:q})};g.prototype.toString=function(){return this.$jscomp$symbol$id_};var h=0,k=function(l){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new g("jscomp_symbol_"+(l||"")+"_"+h++,l)};return k},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var g="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),h=0;h<g.length;h++){var k=$jscomp.global[g[h]];"function"===typeof k&&"function"!=typeof k.prototype[e]&&$jscomp.defineProperty(k.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return e},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(e){e={next:e};e[Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,g){e instanceof String&&(e+="");var h=0,k={next:function(){if(h<e.length){var l=h++;return{value:g(l,e[l]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.findInternal=function(e,g,h){e instanceof String&&(e=String(e));for(var k=e.length,l=0;l<k;l++){var q=e[l];if(g.call(h,q,l,e))return{i:l,v:q}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(g,h){return $jscomp.findInternal(this,g,h).v}},"es6","es3");
$(function(){function e(d,c){d.style.height="1px";d.style.height=d.scrollHeight+c+"px"}function g(){w=[];var d=$(".question");0===d.length?$("#nextToStep2").prop({disabled:!0}):$("#nextToStep2").prop({disabled:!1});var c=$(".color__variable--select"),b=$(".poll-editor__header");b.removeClass("red blue purple");c.hasClass("blue")?(b.addClass("blue"),document.documentElement.style.setProperty("--mdc-theme-primary","#001AFF"),document.documentElement.style.setProperty("--mdc-theme-secondary","#001AFF"),
document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white")):c.hasClass("red")?(b.addClass("red"),document.documentElement.style.setProperty("--mdc-theme-primary","#FF1841"),document.documentElement.style.setProperty("--mdc-theme-secondary","#FF1841"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white")):c.hasClass("purple")?(b.addClass("purple"),document.documentElement.style.setProperty("--mdc-theme-primary","#DB00FF"),document.documentElement.style.setProperty("--mdc-theme-secondary",
"#DB00FF"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white")):(document.documentElement.style.setProperty("--mdc-theme-primary","#C4C4C4"),document.documentElement.style.setProperty("--mdc-theme-secondary","#C4C4C4"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","black"));$(".textarea-line").each(function(a,f){""!==f.value&&e(f,5)});$(".textarea-border").each(function(a,f){""!==f.value&&e(f,-1)});d.each(function(a,f){k(f);"range"===
$(f).attr("data-question-type")&&l(f);w.push($(f).attr("data-question-id"))})}function h(d){var c=document.createElement("div");c.classList.add("answer");var b=document.createElement("div");b.classList.add("answer__icon");c.append(b);if("radio"===d)d='<div class="mdc-form-field">\n                            <div class="mdc-radio mdc-radio--disabled">\n                                <input class="mdc-radio__native-control" type="radio" id="" name="" disabled>\n                                <div class="mdc-radio__background">\n                                    <div class="mdc-radio__outer-circle"></div>\n                                    <div class="mdc-radio__inner-circle"></div>\n                                </div>\n                                <div class="mdc-radio__ripple"></div>\n                            </div>\n                        </div>';
else if("checkbox"===d)d='<div class="mdc-form-field">\n                            <div class="mdc-checkbox mdc-checkbox--disabled">\n                                <input class="mdc-checkbox__native-control" type="checkbox" id="" name="" disabled>\n                                <div class="mdc-checkbox__background">\n                                    <div class="mdc-checkbox__outer-circle"></div>\n                                    <div class="mdc-checkbox__inner-circle"></div>\n                                </div>\n                                <div class="mdc-checkbox__ripple"></div>\n                            </div>\n                        </div>';
else throw Error("Unexpected attribute when adding answer option");b.insertAdjacentHTML("afterbegin",d);b=document.createElement("textarea");b.classList.add("textarea-line","answer__text");$(b).attr({name:"",id:"",rows:"1",placeholder:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430",maxlength:150});c.append(b);b=document.createElement("img");b.classList.add("answer__clear");$(b).attr({src:"/static/main/images/icon/clear-24px.svg",alt:""});c.append(b);return c}function k(d){var c=
new mdc.select.MDCSelect(d.querySelector(".mdc-select"));c.listen("MDCSelect:change",function(){var b=$(d),a=b.attr("data-question-id"),f=b.attr("data-question-type"),n=c.value;if(f!==n){var m=b.children(".question__answers"),r;"checkbox"===n?r='<div class="mdc-form-field">\n                            <div class="mdc-checkbox mdc-checkbox--disabled">\n                                <input class="mdc-checkbox__native-control" type="checkbox" id="" name="" disabled>\n                                <div class="mdc-checkbox__background">\n                                    <div class="mdc-checkbox__outer-circle"></div>\n                                    <div class="mdc-checkbox__inner-circle"></div>\n                                </div>\n                                <div class="mdc-checkbox__ripple"></div>\n                            </div>\n                        </div>':
"radio"===n&&(r='<div class="mdc-form-field">\n                            <div class="mdc-radio mdc-radio--disabled">\n                                <input class="mdc-radio__native-control" type="radio" id="" name="" disabled>\n                                <div class="mdc-radio__background">\n                                    <div class="mdc-radio__outer-circle"></div>\n                                    <div class="mdc-radio__inner-circle"></div>\n                                </div>\n                                <div class="mdc-radio__ripple"></div>\n                            </div>\n                        </div>');
b.attr({"data-question-type":n});if("radio"===f&&"checkbox"===n||"checkbox"===f&&"radio"===n)$(m.children(".answer")).each(function(t,B){t=$(B).children(".answer__icon");t.empty();t[0].insertAdjacentHTML("afterbegin",r)});else if(m.empty(),"radio"===n||"checkbox"===n)a=document.createElement("div"),a.classList.add("answer"),m.append(a),b=document.createElement("div"),b.classList.add("answer__icon"),a.append(b),b.insertAdjacentHTML("afterbegin",r),b=document.createElement("textarea"),b.classList.add("textarea-line",
"answer__text"),$(b).attr({name:"",id:"",rows:"1",placeholder:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430",maxlength:150}),a.append(b),b=document.createElement("img"),b.classList.add("answer__clear"),$(b).attr({src:"/static/main/images/icon/clear-24px.svg",alt:""}),a.append(b),a=document.createElement("a"),a.classList.add("new-answer__btn"),a.text="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0451 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430",
m.after(a);else if("openQuestion"===n)b.children(".new-answer__btn").remove(),a=document.createElement("textarea"),a.classList.add("open-question","textarea-line"),$(a).attr({placeholder:"\u041f\u043e\u043b\u0435 \u0434\u043b\u044f \u043e\u0442\u0432\u0435\u0442\u0430"}),$(a).prop({disabled:!0}),m.append(a);else if("range"===n)b.children(".new-answer__btn").remove(),b=document.createElement("div"),b.classList.add("slider-range"),m.append(b),b.insertAdjacentHTML("afterbegin",'<div class="mdc-slider mdc-slider--discrete" tabindex="0" role="slider"\n                         aria-valuemin="0" aria-valuemax="10" aria-valuenow="0" data-step="1"\n                         aria-label="Select Value" aria-disabled="false">\n                        <div class="mdc-slider__track-container">\n                            <div class="mdc-slider__track"></div>\n                        </div>\n                        <div class="mdc-slider__thumb-container">\n                            <div class="mdc-slider__pin">\n                                <span class="mdc-slider__pin-value-marker"></span>\n                            </div>\n                            <svg class="mdc-slider__thumb" width="21" height="21">\n                                <circle cx="10.5" cy="10.5" r="7.875"></circle>\n                            </svg>\n                            <div class="mdc-slider__focus-ring"></div>\n                        </div>\n                    </div>'),
m=document.createElement("div"),m.classList.add("slider-range__settings"),b.append(m),b=document.createElement("div"),b.classList.add("min"),m.append(b),f=document.createElement("label"),f.classList.add("min__label"),$(f).attr({"for":"min_"+a}),f.textContent="\u041e\u0442",b.append(f),f=document.createElement("input"),f.classList.add("input-transparent","slider-range__min"),$(f).attr({type:"number",id:"min_"+a,min:"0",max:"100",value:"0"}),b.append(f),b=document.createElement("div"),b.classList.add("step"),
m.append(b),f=document.createElement("label"),f.classList.add("step__label"),$(f).attr({"for":"step_"+a}),f.textContent="\u0421 \u0448\u0430\u0433\u043e\u043c",b.append(f),f=document.createElement("input"),f.classList.add("input-transparent","slider-range__step"),$(f).attr({type:"number",id:"step_"+a,min:"1",max:"50",value:"1"}),b.append(f),b=document.createElement("div"),b.classList.add("max"),m.append(b),m=document.createElement("label"),m.classList.add("max__label"),$(m).attr({"for":"max_"+a}),
m.textContent="\u0414\u043e",b.append(m),m=document.createElement("input"),m.classList.add("input-transparent","slider-range__max"),$(m).attr({type:"number",id:"max_"+a,min:"1",max:"100",value:"10"}),b.append(m),l(d);else throw Error("Unexpected attribute on question change");}})}function l(d){var c=new mdc.slider.MDCSlider(d.querySelector(".mdc-slider"));c.min=parseInt($(d).find(".slider-range__min").val());c.max=parseInt($(d).find(".slider-range__max").val());c.step=parseInt($(d).find(".slider-range__step").val());
c.listen("MDCSlider:change",function(){console.log("Value changed to "+c.value)})}function q(d){for(var c in w)if(c===d){d=q(x());break}return d}function x(){for(var d="",c=0;33>c;c++)d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return d}function z(){var d=$(".question"),c={id:$(".poll-editor__header").attr("data-poll-id"),name:$(".poll__name").val(),description:$(".poll__description").val(),questions:[],color:$(".color__variable--select").attr("data-color"),
countQuestion:d.length};d.each(function(b,a){var f=$(a).attr("data-question-type"),n=$(a).children(".question__answers");c.questions.push({id:$(a).attr("data-question-id"),serialNumber:b+1,type:f,name:$(a).children(".question__main").children(".question__name ").val()});if("radio"===f||"checkbox"===f)a=n.children(".answer"),c.questions[b].answers=[],c.questions[b].countAnswers=a.length,$(a).each(function(m,r){m=$(r).children(".answer__text").val();c.questions[b].answers.push(m)});else if("range"===
f)a=n.children(".slider-range").children(".slider-range__settings"),c.questions[b].settingsSlider={min:a.children(".min").children(".slider-range__min").val(),max:a.children(".max").children(".slider-range__max").val(),step:a.children(".step").children(".slider-range__step").val()};else if("openQuestion"!==f)throw Error("unexpected attribute when receiving a poll");});return c}var p=$("body"),u=$(".editor "),v=$('input[name="csrfmiddlewaretoken"]').val(),w=[];g();p.on("click",".color__variable",function(){$(".color__variable").removeClass("color__variable--select");
$(this).addClass("color__variable--select");var d=$(this).attr("data-color"),c=$(".poll-editor__header");c.removeClass("red blue purple");if(""!==d)if(c.addClass(d),"red"===d)document.documentElement.style.setProperty("--mdc-theme-primary","#FF1841"),document.documentElement.style.setProperty("--mdc-theme-secondary","#FF1841"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white");else if("blue"===d)document.documentElement.style.setProperty("--mdc-theme-primary","#001AFF"),
document.documentElement.style.setProperty("--mdc-theme-secondary","#001AFF"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white");else if("purple"===d)document.documentElement.style.setProperty("--mdc-theme-primary","#DB00FF"),document.documentElement.style.setProperty("--mdc-theme-secondary","#DB00FF"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white");else throw Error("Unexpected attribute on color change");else document.documentElement.style.setProperty("--mdc-theme-primary",
"#C4C4C4"),document.documentElement.style.setProperty("--mdc-theme-secondary","#C4C4C4"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","black")});p.on("input",".textarea-line",function(){e(this,5)});p.on("input",".textarea-border",function(){e(this,-1)});p.on("change, input",".slider-range__min",function(){var d=$(this).parent().parent(),c=parseInt($(this).val()),b=parseInt(d.children(".max").children(".slider-range__max").val());d=parseInt(d.children(".step").children(".slider-range__step").val());
if(0>c)c=0;else if(c>b-d)c=b-d;else if("number"!==typeof c||isNaN(c))c=0;$(this).val(c);if(0<=c&&100>=c){var a=$(this).closest(".slider-range").children(".mdc-slider");a=new mdc.slider.MDCSlider(a[0]);a.step=d;a.max=b;a.min=c}});p.on("change, input",".slider-range__max",function(){var d=$(this).parent().parent(),c=parseInt($(this).val()),b=parseInt(d.children(".min").children(".slider-range__min").val());d=parseInt(d.children(".step").children(".slider-range__step").val());if(c<b+d)c=b+d;else if(100<
c)c=100;else if("number"!==typeof c||isNaN(c))c=100;$(this).val(c);if(1<=c&&100>=c){var a=$(this).closest(".slider-range").children(".mdc-slider");a=new mdc.slider.MDCSlider(a[0]);a.step=d;a.max=c;a.min=b}});p.on("change, input",".slider-range__step",function(){var d=$(this).parent().parent(),c=parseInt($(this).val()),b=parseInt(d.children(".max").children(".slider-range__max").val());d=parseInt(d.children(".min").children(".slider-range__min").val());var a=b-d;if(1>c)c=1;else if(50<c)c=50;else if(c>
a)c=a;else if("number"!==typeof c||isNaN(c))c=1;$(this).val(c);1<=c&&50>=c&&(a=$(this).closest(".slider-range").children(".mdc-slider"),a=new mdc.slider.MDCSlider(a[0]),a.step=c,a.max=b,a.min=d)});p.on("click",".question__urn",function(){var d=$(this).parent().parent(),c=$(d).parent();50===c.children(".question").length&&c.parent().children(".actions").children(".plus").removeClass("hide");var b=d.attr("data-question-id");b=w.indexOf(b);-1!==b&&delete w[b];d.remove();0===c.children(".question").length&&
$("#nextToStep2").prop({disabled:!0})});p.on("click",".plus",function(){var d=$(".questions"),c=document.createElement("div");c.classList.add("question","rounded-block");var b=q(x());$(c).attr({"data-question-type":"radio","data-question-id":b});b=document.createElement("div");b.classList.add("question__main");c.append(b);var a=document.createElement("textarea");a.classList.add("question__name","textarea-border");$(a).attr({placeholder:"\u0412\u043e\u043f\u0440\u043e\u0441",maxlength:150});b.append(a);
a=document.createElement("div");a.classList.add("question__type","unselectable");b.append(a);a.insertAdjacentHTML("afterbegin",'<div class="mdc-select mdc-select--outlined width-264">\n                        <div class="mdc-select__anchor height-50" aria-labelledby="outlined-select-label">\n                            <span id="" class="mdc-select__selected-text"></span>\n                            <span class="mdc-select__dropdown-icon">\n                                <svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5">\n                                    <polygon\n                                            class="mdc-select__dropdown-icon-inactive"\n                                            stroke="none"\n                                            fill-rule="evenodd"\n                                            points="7 10 12 15 17 10">\n                                    </polygon>\n                                    <polygon\n                                            class="mdc-select__dropdown-icon-active"\n                                            stroke="none"\n                                            fill-rule="evenodd"\n                                            points="7 15 12 10 17 15">\n                                    </polygon>\n                                </svg>\n                            </span>\n                            <span class="mdc-notched-outline">\n                            <span class="mdc-notched-outline__leading"></span>\n                            <span class="mdc-notched-outline__notch">\n                            </span>\n                            <span class="mdc-notched-outline__trailing"></span>\n                        </span>\n                        </div>\n                        <div class="mdc-select__menu mdc-menu mdc-menu-surface width-264">\n                            <ul class="mdc-list">\n                                <li class="mdc-list-item mdc-list-item--selected" data-value="radio">\n                                    <span class="mdc-list-item__ripple"></span>\n                                    <span class="mdc-list-item__text">\u041e\u0434\u0438\u043d \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430</span>\n                                </li>\n                                <li class="mdc-list-item" data-value="checkbox">\n                                    <span class="mdc-list-item__ripple"></span>\n                                    <span class="mdc-list-item__text">\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430</span>\n                                </li>\n                                <li class="mdc-list-item" data-value="openQuestion">\n                                    <span class="mdc-list-item__ripple"></span>\n                                    <span class="mdc-list-item__text">\u0420\u0430\u0437\u0432\u0451\u0440\u043d\u0443\u0442\u044b\u0439 \u043e\u0442\u0432\u0435\u0442</span>\n                                </li>\n                                <li class="mdc-list-item" data-value="range">\n                                    <span class="mdc-list-item__ripple"></span>\n                                    <span class="mdc-list-item__text">\u0428\u043a\u0430\u043b\u0430</span>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>');
k(c);a=document.createElement("div");a.classList.add("question__answers");c.append(a);b=document.createElement("div");b.classList.add("answer");a.append(b);a=document.createElement("div");a.classList.add("answer__icon");b.append(a);a.insertAdjacentHTML("afterbegin",'<div class="mdc-form-field">\n                            <div class="mdc-radio mdc-radio--disabled">\n                                <input class="mdc-radio__native-control" type="radio" id="" name="" disabled>\n                                <div class="mdc-radio__background">\n                                    <div class="mdc-radio__outer-circle"></div>\n                                    <div class="mdc-radio__inner-circle"></div>\n                                </div>\n                                <div class="mdc-radio__ripple"></div>\n                            </div>\n                        </div>');
a=document.createElement("textarea");a.classList.add("textarea-line","answer__text");$(a).attr({name:"",id:"",rows:"1",placeholder:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430",maxlength:150});b.append(a);a=document.createElement("img");a.classList.add("answer__clear");$(a).attr({src:"/static/main/images/icon/clear-24px.svg",alt:""});b.append(a);b=document.createElement("a");b.classList.add("new-answer__btn");b.text="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0451 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430";
c.append(b);b=document.createElement("div");b.classList.add("question__footer");c.append(b);a=document.createElement("img");a.classList.add("question__urn");$(a).attr({src:"/static/main/images/icon/delete_forever-24px.svg",alt:""});b.append(a);d.append(c);$("#nextToStep2").prop({disabled:!1});w.push($(c).attr("data-question-id"));50<=d.children(".question").length&&$(this).addClass("hide")});p.on("click",".new-answer__btn",function(){var d=$(this).parent(),c=d.attr("data-question-type");if("radio"===
c||"checkbox"===c)d=d.children(".question__answers"),d.append(h(c)),15<=d.children(".answer").length&&$(this).addClass("hide");else throw Error("Unexpected attribute when adding answer option");});p.on("click",".answer__clear",function(){var d=$(this).parent(),c=d.parent(),b=c.parent(),a=b.attr("data-question-type");if("radio"===a||"checkbox"===a){c=c.children(".answer").length;if(15===c)b.children(".new-answer__btn").removeClass("hide");else if(1===c){d.children(".answer__text").val("");return}d.remove()}else throw Error("Unexpected attribute when adding answer option");
});p.on("click","#cancel",function(){location.href="/polls/"});p.on("click","#saveAs",function(){var d=$(".poll-editor__header").attr("data-poll-id"),c=z(),b=$(this).parent().children(".save__status");console.log(c);$.ajax({url:"save_as/",type:"post",data:{csrfmiddlewaretoken:v,id:d,template:c},beforeSend:function(){b.removeClass("status--loading status--error status--done").addClass("status--loading")},success:function(){b.removeClass("status--loading status--error status--done").addClass("status--done")},
error:function(){b.removeClass("status--loading status--error status--done").addClass("status--error")}})});p.on("click","#nextToStep2",function(d){var c=$(".poll-editor__header").attr("data-poll-id"),b=z();$.ajax({url:"step/2/from/1",type:"post",data:{csrfmiddlewaretoken:v,id:c,template:b},beforeSend:function(){$(d.target).prop({disabled:!0})},success:function(a){document.documentElement.style.setProperty("--mdc-theme-primary","#FF1841");document.documentElement.style.setProperty("--mdc-theme-secondary",
"#FF1841");document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white");var f=$(".head__main");f.empty();f[0].insertAdjacentHTML("afterbegin",a.headMain);f=$(".head__move");f.empty();f[0].insertAdjacentHTML("afterbegin",a.headMove);f=$(".categories-block");f.empty();f[0].insertAdjacentHTML("afterbegin",a.categories);u.attr({"data-step":"2"})},complete:function(){$(d.target).prop({disabled:!1})},error:function(){}})});p.on("click","#backToStep1",function(d){var c=$("input[name=participants]:checked").attr("data-participant-id");
$.ajax({url:"step/1/from/2",type:"post",data:{csrfmiddlewaretoken:v,checkedTarget:c},beforeSend:function(){$(d.target).prop({disabled:!0})},success:function(b){var a=$(".head__main");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMain);a=$(".head__move");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMove);a=$(".categories-block");a.empty();a[0].insertAdjacentHTML("afterbegin",b.categories);u.attr({"data-step":"1"});g()},complete:function(){$(d.target).prop({disabled:!1})}})});var A;p.on("click",
".category",function(){var d=$(this).attr("data-part-url"),c=$(".loader-round"),b=$(".loader__status"),a=$(".substrate"),f=$(".input__search"),n=u.attr("data-step");if(2!==n||3!==n)throw Error("Unexpected attribute on search");if(2===n){var m=$("input[name=participants]:checked").attr("data-participant-id");m={csrfmiddlewaretoken:v,checkedTarget:m}}else 3===n&&($("input[name=participants]:checked").each(function(r,t){checked.push($(t).attr("data-participant-id"))}),m={csrfmiddlewaretoken:v,checkedInterviewed:[]});
$.ajax({url:"step/"+n+"/category/"+d+"/",type:"get",data:m,beforeSend:function(){clearTimeout(A);a.addClass("disabled");c.removeClass("hide");b.removeClass("status--loading status--done status--error").addClass("status--loading")},success:function(r){if("participants"===d)f.attr({placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430\u043c...","data-mode":"participants"});else if("teams"===d)f.attr({placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c...",
"data-mode":"teams"});else throw Error("unexpected attribute when changing category");f.prop({disabled:!1});var t=$(".content");t.empty();t[0].insertAdjacentHTML("afterbegin",r.content);b.removeClass("status--loading status--done status--error").addClass("status--done");0<$("input[name=participants]:checked").length?2===n?$("#nextToStep3").prop({disabled:!1}):3===n&&$("#sendPoll").prop({disabled:!1}):2===n?$("#nextToStep3").prop({disabled:!0}):3===n&&$("#sendPoll").prop({disabled:!0})},complete:function(){a.removeClass("disabled");
A=setTimeout(function(){b.removeClass("status--loading status--done status--error");c.addClass("hide")},2E3)},error:function(){f.prop({disabled:!0});b.removeClass("status--loading status--done status--error").addClass("status--error")}})});p.on("click","[name=participants]",function(){$("#nextToStep3").prop({disabled:!1})});p.on("click","#nextToStep3",function(d){var c=$("input[name=participants]:checked").attr("data-participant-id");$.ajax({url:"step/3/from/2",type:"post",data:{csrfmiddlewaretoken:v,
checkedTarget:c},beforeSend:function(){$(d.target).prop({disabled:!0})},success:function(b){var a=$(".head__main");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMain);a=$(".head__move");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMove);a=$(".categories-block");a.empty();a[0].insertAdjacentHTML("afterbegin",b.categories);u.attr({"data-step":"3"})},complete:function(){$(d.target).prop({disabled:!1})},error:function(){}})});p.on("click",".team__action",function(){var d=$(this).parent().parent().parent(),
c=d.attr("data-team-id");$(".team--selected").each(function(b,a){b=$(a).attr("data-team-id");c!==b&&$(a).toggleClass("team--selected")});d.toggleClass("team--selected")});var y;p.on("input",".input__search",function(d){var c=$(".sort"),b=$(".content"),a=$(".loader-round"),f=a.children(".loader__status"),n=u.attr("data-step");if(2!==n||3!==n)throw Error("Unexpected attribute on search");y=$.ajax({url:"step/"+n+"/search/",type:"get",data:{mode:$(d.target).attr("data-mode")},beforeSend:function(){y&&
y.abort();a.removeClass("hide");f.removeClass("status--loading status--done status--error").addClass("status--loading");c.addClass("disabled");b.empty()},complete:function(){y=void 0;c.removeClass("disabled");a.addClass("hide");f.removeClass("status--loading status--done status--error")},success:function(m){b[0].insertAdjacentHTML("afterbegin",m.content)}})});p.on("click","[name=participants]",function(){0<$("input[name=participants]:checked").length?$("#sendPoll").prop({disabled:!1}):$("#sendPoll").prop({disabled:!0})});
p.on("click","#backToStep2",function(d){var c=[];$("input[name=participants]:checked").each(function(b,a){c.push($(a).attr("data-participant-id"))});$.ajax({url:"step/2/from/3",type:"post",data:{csrfmiddlewaretoken:v,checkedInterviewed:c},beforeSend:function(){$(d.target).prop({disabled:!0})},success:function(b){var a=$(".head__main");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMain);a=$(".head__move");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMove);a=$(".categories-block");a.empty();
a[0].insertAdjacentHTML("afterbegin",b.categories);u.attr({"data-step":"2"})},complete:function(){$(d.target).prop({disabled:!1})}})});p.on("click","#sendPoll",function(d){var c=[];$("input[name=participants]:checked").each(function(b,a){c.push($(a).attr("data-participant-id"))});$.ajax({url:"send/",type:"post",data:{csrfmiddlewaretoken:v,checkedInterviewed:c},beforeSend:function(){u.addClass("disabled");$(d.target).prop({disabled:!0})},success:function(){location.href="polls/"},error:function(){u.removeClass("disabled");
$(d.target).prop({disabled:!1})}})})});

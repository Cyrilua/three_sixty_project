var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(e){return e.raw=e};$jscomp.createTemplateTagFirstArgWithRaw=function(e,g){e.raw=g;return e};$jscomp.arrayIteratorImpl=function(e){var g=0;return function(){return g<e.length?{done:!1,value:e[g++]}:{done:!0}}};$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,g,k){if(e==Array.prototype||e==Object.prototype)return e;e[g]=k.value;return e};
$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var g=0;g<e.length;++g){var k=e[g];if(k&&k.Math==Math)return k}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,g){var k=$jscomp.propertyToPolyfillSymbol[g];if(null==k)return e[g];k=e[k];return void 0!==k?k:e[g]};$jscomp.polyfill=function(e,g,k,l){g&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,g,k,l):$jscomp.polyfillUnisolated(e,g,k,l))};
$jscomp.polyfillUnisolated=function(e,g,k,l){k=$jscomp.global;e=e.split(".");for(l=0;l<e.length-1;l++){var m=e[l];if(!(m in k))return;k=k[m]}e=e[e.length-1];l=k[e];g=g(l);g!=l&&null!=g&&$jscomp.defineProperty(k,e,{configurable:!0,writable:!0,value:g})};
$jscomp.polyfillIsolated=function(e,g,k,l){var m=e.split(".");e=1===m.length;l=m[0];l=!e&&l in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var y=0;y<m.length-1;y++){var A=m[y];if(!(A in l))return;l=l[A]}m=m[m.length-1];k=$jscomp.IS_SYMBOL_NATIVE&&"es6"===k?l[m]:null;g=g(k);null!=g&&(e?$jscomp.defineProperty($jscomp.polyfills,m,{configurable:!0,writable:!0,value:g}):g!==k&&($jscomp.propertyToPolyfillSymbol[m]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(m):$jscomp.POLYFILL_PREFIX+m,m=
$jscomp.propertyToPolyfillSymbol[m],$jscomp.defineProperty(l,m,{configurable:!0,writable:!0,value:g})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(e){if(e)return e;var g=function(m,y){this.$jscomp$symbol$id_=m;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:y})};g.prototype.toString=function(){return this.$jscomp$symbol$id_};var k=0,l=function(m){if(this instanceof l)throw new TypeError("Symbol is not a constructor");return new g("jscomp_symbol_"+(m||"")+"_"+k++,m)};return l},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var g="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),k=0;k<g.length;k++){var l=$jscomp.global[g[k]];"function"===typeof l&&"function"!=typeof l.prototype[e]&&$jscomp.defineProperty(l.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return e},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(e){e={next:e};e[Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,g){e instanceof String&&(e+="");var k=0,l={next:function(){if(k<e.length){var m=k++;return{value:g(m,e[m]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};
$jscomp.findInternal=function(e,g,k){e instanceof String&&(e=String(e));for(var l=e.length,m=0;m<l;m++){var y=e[m];if(g.call(k,y,m,e))return{i:m,v:y}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(g,k){return $jscomp.findInternal(this,g,k).v}},"es6","es3");
$(function(){function e(d){var b=D(),a=$(d).parent().children(".save__status");console.log(b);$.ajax({url:"save_as/",type:"post",data:{csrfmiddlewaretoken:u,pollId:t,template:b},beforeSend:function(){f.addClass("disabled");q.addClass("disabled");a.removeClass("status--loading status--error status--done").addClass("status--loading")},success:function(){Snackbar.show({text:"\u0428\u0430\u0431\u043b\u043e\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d",showAction:!0,
duration:3E3,actionText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",actionTextColor:"green",customClass:"custom"})},error:function(){Snackbar.show({text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0448\u0430\u0431\u043b\u043e\u043d\u0430",showAction:!0,duration:3E3,actionText:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",actionTextColor:"red",customClass:"custom",onActionClick:function(c){$(c).animate({opacity:0},
200,function(){e()})}})},complete:function(){f.eq(0).removeClass("disabled");f.eq(1).removeClass("disabled");w&&f.eq(2).removeClass("disabled");q.removeClass("disabled");a.removeClass("status--loading status--error status--done")}})}function g(d){q.attr("data-poll-id");d=D();console.log(d);$.ajax({url:"step/2/from/1/",type:"post",data:{csrfmiddlewaretoken:u,pollId:t,template:d},beforeSend:function(){q.addClass("disabled");f.addClass("disabled")},success:function(b){document.documentElement.style.setProperty("--mdc-theme-primary",
"#FF1841");document.documentElement.style.setProperty("--mdc-theme-secondary","#FF1841");document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white");var a=$(".head__main");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMain);a=$(".head__move");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMove);a=$(".categories-block");a.empty();a[0].insertAdjacentHTML("afterbegin",b.categories);void 0===t&&(t=b.pollId);q.attr({"data-step":"2"});f.eq(0).removeClass("item--active");
f.eq(1).addClass("item--active")},complete:function(){q.removeClass("disabled");f.eq(1).removeClass("disabled");f.eq(0).removeClass("disabled");w&&f.eq(2).removeClass("disabled")},error:function(){}})}function k(d){d=$("input[name=participants]:checked").attr("data-participant-id");$.ajax({url:"step/1/from/2/",type:"post",data:{csrfmiddlewaretoken:u,checkedTarget:d,pollId:t},beforeSend:function(){f.addClass("disabled");q.addClass("disabled")},success:function(b){var a=$(".head__main");a.empty();a[0].insertAdjacentHTML("afterbegin",
b.headMain);a=$(".head__move");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMove);a=$(".categories-block");a.empty();a[0].insertAdjacentHTML("afterbegin",b.categories);q.attr({"data-step":"1"});f.eq(1).removeClass("item--active");f.eq(0).addClass("item--active");F()},complete:function(){f.eq(0).removeClass("disabled");f.eq(1).removeClass("disabled");w&&f.eq(2).removeClass("disabled");q.removeClass("disabled")}})}function l(d){d=$("input[name=participants]:checked").attr("data-participant-id");
$.ajax({url:"step/3/from/2/",type:"post",data:{pollId:t,csrfmiddlewaretoken:u,checkedTarget:d},beforeSend:function(){f.addClass("disabled");q.addClass("disabled")},success:function(b){var a=$(".head__main");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMain);a=$(".head__move");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMove);a=$(".categories-block");a.empty();a[0].insertAdjacentHTML("afterbegin",b.categories);q.attr({"data-step":"3"});f.eq(1).removeClass("item--active");f.eq(2).addClass("item--active")},
complete:function(){f.removeClass("disabled");q.removeClass("disabled")},error:function(){}})}function m(d){var b=[];$("input[name=participants]:checked").each(function(a,c){b.push($(c).attr("data-participant-id"))});$.ajax({url:"step/2/from/3/",type:"post",data:{pollId:t,csrfmiddlewaretoken:u,checkedInterviewed:b},beforeSend:function(){f.addClass("disabled");q.addClass("disabled")},success:function(a){var c=$(".head__main");c.empty();c[0].insertAdjacentHTML("afterbegin",a.headMain);c=$(".head__move");
c.empty();c[0].insertAdjacentHTML("afterbegin",a.headMove);c=$(".categories-block");c.empty();c[0].insertAdjacentHTML("afterbegin",a.categories);q.attr({"data-step":"2"});f.eq(2).removeClass("item--active");f.eq(1).addClass("item--active")},complete:function(){f.eq(0).removeClass("disabled");f.eq(1).removeClass("disabled");w&&f.eq(2).removeClass("disabled");q.removeClass("disabled")}})}function y(d){var b=[];$("input[name=participants]:checked").each(function(a,c){b.push($(c).attr("data-participant-id"))});
$.ajax({url:"step/1/from/3/",type:"post",data:{pollId:t,csrfmiddlewaretoken:u,checkedInterviewed:b},beforeSend:function(){f.addClass("disabled");q.addClass("disabled")},success:function(a){var c=$(".head__main");c.empty();c[0].insertAdjacentHTML("afterbegin",a.headMain);c=$(".head__move");c.empty();c[0].insertAdjacentHTML("afterbegin",a.headMove);c=$(".categories-block");c.empty();c[0].insertAdjacentHTML("afterbegin",a.categories);q.attr({"data-step":"1"});f.eq(2).removeClass("item--active");f.eq(1).addClass("item--active")},
complete:function(){f.eq(0).removeClass("disabled");f.eq(1).removeClass("disabled");w&&f.eq(2).removeClass("disabled");q.removeClass("disabled")}})}function A(d){d=D();console.log(d);$.ajax({url:"step/3/from/1/",type:"post",data:{csrfmiddlewaretoken:u,pollId:t,template:d},beforeSend:function(){q.addClass("disabled");f.addClass("disabled")},success:function(b){document.documentElement.style.setProperty("--mdc-theme-primary","#FF1841");document.documentElement.style.setProperty("--mdc-theme-secondary",
"#FF1841");document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white");var a=$(".head__main");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMain);a=$(".head__move");a.empty();a[0].insertAdjacentHTML("afterbegin",b.headMove);a=$(".categories-block");a.empty();a[0].insertAdjacentHTML("afterbegin",b.categories);q.attr({"data-step":"3"});f.eq(0).removeClass("item--active");f.eq(1).addClass("item--active")},complete:function(){q.removeClass("disabled");f.eq(1).removeClass("disabled");
f.eq(0).removeClass("disabled");w&&f.eq(2).removeClass("disabled")},error:function(){}})}function B(d,b){d.style.height="1px";d.style.height=d.scrollHeight+b+"px"}function F(){z=[];var d=$(".question");0===d.length?($("#nextToStep2").prop({disabled:!0}),f.eq(1).addClass("disabled")):($("#nextToStep2").prop({disabled:!1}),f.eq(1).removeClass("disabled"));w?f.eq(2).removeClass("disabled"):f.eq(2).addClass("disabled");var b=$(".color__variable--select"),a=$(".poll-editor__header");a.removeClass("red blue purple");
b.hasClass("blue")?(a.addClass("blue"),document.documentElement.style.setProperty("--mdc-theme-primary","#001AFF"),document.documentElement.style.setProperty("--mdc-theme-secondary","#001AFF"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white")):b.hasClass("red")?(a.addClass("red"),document.documentElement.style.setProperty("--mdc-theme-primary","#FF1841"),document.documentElement.style.setProperty("--mdc-theme-secondary","#FF1841"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark",
"white")):b.hasClass("purple")?(a.addClass("purple"),document.documentElement.style.setProperty("--mdc-theme-primary","#DB00FF"),document.documentElement.style.setProperty("--mdc-theme-secondary","#DB00FF"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white")):(document.documentElement.style.setProperty("--mdc-theme-primary","#C4C4C4"),document.documentElement.style.setProperty("--mdc-theme-secondary","#C4C4C4"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark",
"black"));$(".textarea-line").each(function(c,h){""!==h.value&&B(h,5)});$(".textarea-border").each(function(c,h){""!==h.value&&B(h,-1)});d.each(function(c,h){G(h);"range"===$(h).attr("data-question-type")&&H(h);z.push($(h).attr("data-question-id"))})}function L(d){var b=document.createElement("div");b.classList.add("answer");var a=document.createElement("div");a.classList.add("answer__icon");b.append(a);if("radio"===d)d='<div class="mdc-form-field">\n                            <div class="mdc-radio mdc-radio--disabled">\n                                <input class="mdc-radio__native-control" type="radio" id="" name="" disabled>\n                                <div class="mdc-radio__background">\n                                    <div class="mdc-radio__outer-circle"></div>\n                                    <div class="mdc-radio__inner-circle"></div>\n                                </div>\n                                <div class="mdc-radio__ripple"></div>\n                            </div>\n                        </div>';
else if("checkbox"===d)d='<div class="mdc-form-field">\n                            <div class="mdc-checkbox mdc-checkbox--disabled">\n                                <input class="mdc-checkbox__native-control" type="checkbox" id="" name="" disabled>\n                                <div class="mdc-checkbox__background">\n                                    <div class="mdc-checkbox__outer-circle"></div>\n                                    <div class="mdc-checkbox__inner-circle"></div>\n                                </div>\n                                <div class="mdc-checkbox__ripple"></div>\n                            </div>\n                        </div>';
else throw Error("Unexpected attribute when adding answer option");a.insertAdjacentHTML("afterbegin",d);a=document.createElement("textarea");a.classList.add("textarea-line","answer__text");$(a).attr({name:"",id:"",rows:"1",placeholder:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430",maxlength:150});b.append(a);a=document.createElement("img");a.classList.add("answer__clear");$(a).attr({src:"/static/main/images/icon/clear-24px.svg",alt:""});b.append(a);return b}function G(d){var b=
new mdc.select.MDCSelect(d.querySelector(".mdc-select"));b.listen("MDCSelect:change",function(){var a=$(d),c=a.attr("data-question-id"),h=a.attr("data-question-type"),p=b.value;if(h!==p){var n=a.children(".question__answers"),v;"checkbox"===p?v='<div class="mdc-form-field">\n                            <div class="mdc-checkbox mdc-checkbox--disabled">\n                                <input class="mdc-checkbox__native-control" type="checkbox" id="" name="" disabled>\n                                <div class="mdc-checkbox__background">\n                                    <div class="mdc-checkbox__outer-circle"></div>\n                                    <div class="mdc-checkbox__inner-circle"></div>\n                                </div>\n                                <div class="mdc-checkbox__ripple"></div>\n                            </div>\n                        </div>':
"radio"===p&&(v='<div class="mdc-form-field">\n                            <div class="mdc-radio mdc-radio--disabled">\n                                <input class="mdc-radio__native-control" type="radio" id="" name="" disabled>\n                                <div class="mdc-radio__background">\n                                    <div class="mdc-radio__outer-circle"></div>\n                                    <div class="mdc-radio__inner-circle"></div>\n                                </div>\n                                <div class="mdc-radio__ripple"></div>\n                            </div>\n                        </div>');
a.attr({"data-question-type":p});if("radio"===h&&"checkbox"===p||"checkbox"===h&&"radio"===p)$(n.children(".answer")).each(function(x,E){x=$(E).children(".answer__icon");x.empty();x[0].insertAdjacentHTML("afterbegin",v)});else if(n.empty(),"radio"===p||"checkbox"===p)c=document.createElement("div"),c.classList.add("answer"),n.append(c),a=document.createElement("div"),a.classList.add("answer__icon"),c.append(a),a.insertAdjacentHTML("afterbegin",v),a=document.createElement("textarea"),a.classList.add("textarea-line",
"answer__text"),$(a).attr({name:"",id:"",rows:"1",placeholder:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430",maxlength:150}),c.append(a),a=document.createElement("img"),a.classList.add("answer__clear"),$(a).attr({src:"/static/main/images/icon/clear-24px.svg",alt:""}),c.append(a),c=document.createElement("a"),c.classList.add("new-answer__btn"),c.text="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0451 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430",
n.after(c);else if("openQuestion"===p)a.children(".new-answer__btn").remove(),c=document.createElement("textarea"),c.classList.add("open-question","textarea-line"),$(c).attr({placeholder:"\u041f\u043e\u043b\u0435 \u0434\u043b\u044f \u043e\u0442\u0432\u0435\u0442\u0430"}),$(c).prop({disabled:!0}),n.append(c);else if("range"===p)a.children(".new-answer__btn").remove(),a=document.createElement("div"),a.classList.add("slider-range"),n.append(a),a.insertAdjacentHTML("afterbegin",'<div class="mdc-slider mdc-slider--discrete" tabindex="0" role="slider"\n                         aria-valuemin="0" aria-valuemax="10" aria-valuenow="0" data-step="1"\n                         aria-label="Select Value" aria-disabled="false">\n                        <div class="mdc-slider__track-container">\n                            <div class="mdc-slider__track"></div>\n                        </div>\n                        <div class="mdc-slider__thumb-container">\n                            <div class="mdc-slider__pin">\n                                <span class="mdc-slider__pin-value-marker"></span>\n                            </div>\n                            <svg class="mdc-slider__thumb" width="21" height="21">\n                                <circle cx="10.5" cy="10.5" r="7.875"></circle>\n                            </svg>\n                            <div class="mdc-slider__focus-ring"></div>\n                        </div>\n                    </div>'),
n=document.createElement("div"),n.classList.add("slider-range__settings"),a.append(n),a=document.createElement("div"),a.classList.add("min"),n.append(a),h=document.createElement("label"),h.classList.add("min__label"),$(h).attr({"for":"min_"+c}),h.textContent="\u041e\u0442",a.append(h),h=document.createElement("input"),h.classList.add("input-transparent","slider-range__min"),$(h).attr({type:"number",id:"min_"+c,min:"0",max:"100",value:"0"}),a.append(h),a=document.createElement("div"),a.classList.add("step"),
n.append(a),h=document.createElement("label"),h.classList.add("step__label"),$(h).attr({"for":"step_"+c}),h.textContent="\u0421 \u0448\u0430\u0433\u043e\u043c",a.append(h),h=document.createElement("input"),h.classList.add("input-transparent","slider-range__step"),$(h).attr({type:"number",id:"step_"+c,min:"1",max:"50",value:"1"}),a.append(h),a=document.createElement("div"),a.classList.add("max"),n.append(a),n=document.createElement("label"),n.classList.add("max__label"),$(n).attr({"for":"max_"+c}),
n.textContent="\u0414\u043e",a.append(n),n=document.createElement("input"),n.classList.add("input-transparent","slider-range__max"),$(n).attr({type:"number",id:"max_"+c,min:"1",max:"100",value:"10"}),a.append(n),H(d);else throw Error("Unexpected attribute on question change");}})}function H(d){var b=new mdc.slider.MDCSlider(d.querySelector(".mdc-slider"));b.min=parseInt($(d).find(".slider-range__min").val());b.max=parseInt($(d).find(".slider-range__max").val());b.step=parseInt($(d).find(".slider-range__step").val());
b.listen("MDCSlider:change",function(){console.log("Value changed to "+b.value)})}function I(d){for(var b in z)if(b===d){d=I(J());break}return d}function J(){for(var d="",b=0;33>b;b++)d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return d}function D(){var d=$(".question"),b={pollId:t,name:$(".poll__name").val(),description:$(".poll__description").val(),questions:[],color:$(".color__variable--select").attr("data-color"),countQuestion:d.length};
d.each(function(a,c){var h=$(c).attr("data-question-type"),p=$(c).children(".question__answers");b.questions.push({id:$(c).attr("data-question-id"),serialNumber:a+1,type:h,name:$(c).children(".question__main").children(".question__name ").val()});if("radio"===h||"checkbox"===h)c=p.children(".answer"),b.questions[a].answers=[],b.questions[a].countAnswers=c.length,$(c).each(function(n,v){n=$(v).children(".answer__text").val();b.questions[a].answers.push(n)});else if("range"===h)c=p.children(".slider-range").children(".slider-range__settings"),
b.questions[a].settingsSlider={min:c.children(".min").children(".slider-range__min").val(),max:c.children(".max").children(".slider-range__max").val(),step:c.children(".step").children(".slider-range__step").val()};else if("openQuestion"!==h)throw Error("unexpected attribute when receiving a poll");});return b}var r=$("body"),q=$(".editor "),f=$(".menu-r").children(".menu").children(".menu__item"),u=$('input[name="csrfmiddlewaretoken"]').val(),z=[],w=!1,t;F();r.on("click",".color__variable",function(){$(".color__variable").removeClass("color__variable--select");
$(this).addClass("color__variable--select");var d=$(this).attr("data-color"),b=$(".poll-editor__header");b.removeClass("red blue purple");if(""!==d)if(b.addClass(d),"red"===d)document.documentElement.style.setProperty("--mdc-theme-primary","#FF1841"),document.documentElement.style.setProperty("--mdc-theme-secondary","#FF1841"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white");else if("blue"===d)document.documentElement.style.setProperty("--mdc-theme-primary","#001AFF"),
document.documentElement.style.setProperty("--mdc-theme-secondary","#001AFF"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white");else if("purple"===d)document.documentElement.style.setProperty("--mdc-theme-primary","#DB00FF"),document.documentElement.style.setProperty("--mdc-theme-secondary","#DB00FF"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","white");else throw Error("Unexpected attribute on color change");else document.documentElement.style.setProperty("--mdc-theme-primary",
"#C4C4C4"),document.documentElement.style.setProperty("--mdc-theme-secondary","#C4C4C4"),document.documentElement.style.setProperty("--mdc-theme-text-primary-on-dark","black")});r.on("input",".textarea-line",function(){B(this,5)});r.on("input",".textarea-border",function(){B(this,-1)});r.on("change, input",".slider-range__min",function(){var d=$(this).parent().parent(),b=parseInt($(this).val()),a=parseInt(d.children(".max").children(".slider-range__max").val());d=parseInt(d.children(".step").children(".slider-range__step").val());
if(0>b)b=0;else if(b>a-d)b=a-d;else if("number"!==typeof b||isNaN(b))b=0;$(this).val(b);if(0<=b&&100>=b){var c=$(this).closest(".slider-range").children(".mdc-slider");c=new mdc.slider.MDCSlider(c[0]);c.step=d;c.max=a;c.min=b}});r.on("change, input",".slider-range__max",function(){var d=$(this).parent().parent(),b=parseInt($(this).val()),a=parseInt(d.children(".min").children(".slider-range__min").val());d=parseInt(d.children(".step").children(".slider-range__step").val());if(b<a+d)b=a+d;else if(100<
b)b=100;else if("number"!==typeof b||isNaN(b))b=100;$(this).val(b);if(1<=b&&100>=b){var c=$(this).closest(".slider-range").children(".mdc-slider");c=new mdc.slider.MDCSlider(c[0]);c.step=d;c.max=b;c.min=a}});r.on("change, input",".slider-range__step",function(){var d=$(this).parent().parent(),b=parseInt($(this).val()),a=parseInt(d.children(".max").children(".slider-range__max").val());d=parseInt(d.children(".min").children(".slider-range__min").val());var c=a-d;if(1>b)b=1;else if(50<b)b=50;else if(b>
c)b=c;else if("number"!==typeof b||isNaN(b))b=1;$(this).val(b);1<=b&&50>=b&&(c=$(this).closest(".slider-range").children(".mdc-slider"),c=new mdc.slider.MDCSlider(c[0]),c.step=b,c.max=a,c.min=d)});r.on("click",".question__urn",function(){var d=$(this).parent().parent(),b=$(d).parent();50===b.children(".question").length&&b.parent().children(".actions").children(".plus").removeClass("hide");var a=d.attr("data-question-id");a=z.indexOf(a);-1!==a&&delete z[a];d.remove();0===b.children(".question").length&&
($("#nextToStep2").prop({disabled:!0}),f.eq(1).addClass("disabled"),w&&f.eq(2).addClass("disabled"),$(".save-as").css("visibility","hidden"))});r.on("click",".plus",function(){var d=$(".questions"),b=document.createElement("div");b.classList.add("question","rounded-block");var a=I(J());$(b).attr({"data-question-type":"radio","data-question-id":a});a=document.createElement("div");a.classList.add("question__main");b.append(a);var c=document.createElement("textarea");c.classList.add("question__name",
"textarea-border");$(c).attr({placeholder:"\u0412\u043e\u043f\u0440\u043e\u0441",maxlength:150});a.append(c);c=document.createElement("div");c.classList.add("question__type","unselectable");a.append(c);c.insertAdjacentHTML("afterbegin",'<div class="mdc-select mdc-select--outlined width-264">\n                        <div class="mdc-select__anchor height-50" aria-labelledby="outlined-select-label">\n                            <span id="" class="mdc-select__selected-text"></span>\n                            <span class="mdc-select__dropdown-icon">\n                                <svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5">\n                                    <polygon\n                                            class="mdc-select__dropdown-icon-inactive"\n                                            stroke="none"\n                                            fill-rule="evenodd"\n                                            points="7 10 12 15 17 10">\n                                    </polygon>\n                                    <polygon\n                                            class="mdc-select__dropdown-icon-active"\n                                            stroke="none"\n                                            fill-rule="evenodd"\n                                            points="7 15 12 10 17 15">\n                                    </polygon>\n                                </svg>\n                            </span>\n                            <span class="mdc-notched-outline">\n                            <span class="mdc-notched-outline__leading"></span>\n                            <span class="mdc-notched-outline__notch">\n                            </span>\n                            <span class="mdc-notched-outline__trailing"></span>\n                        </span>\n                        </div>\n                        <div class="mdc-select__menu mdc-menu mdc-menu-surface width-264">\n                            <ul class="mdc-list">\n                                <li class="mdc-list-item mdc-list-item--selected" data-value="radio">\n                                    <span class="mdc-list-item__ripple"></span>\n                                    <span class="mdc-list-item__text">\u041e\u0434\u0438\u043d \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430</span>\n                                </li>\n                                <li class="mdc-list-item" data-value="checkbox">\n                                    <span class="mdc-list-item__ripple"></span>\n                                    <span class="mdc-list-item__text">\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430</span>\n                                </li>\n                                <li class="mdc-list-item" data-value="openQuestion">\n                                    <span class="mdc-list-item__ripple"></span>\n                                    <span class="mdc-list-item__text">\u0420\u0430\u0437\u0432\u0451\u0440\u043d\u0443\u0442\u044b\u0439 \u043e\u0442\u0432\u0435\u0442</span>\n                                </li>\n                                <li class="mdc-list-item" data-value="range">\n                                    <span class="mdc-list-item__ripple"></span>\n                                    <span class="mdc-list-item__text">\u0428\u043a\u0430\u043b\u0430</span>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>');
G(b);c=document.createElement("div");c.classList.add("question__answers");b.append(c);a=document.createElement("div");a.classList.add("answer");c.append(a);c=document.createElement("div");c.classList.add("answer__icon");a.append(c);c.insertAdjacentHTML("afterbegin",'<div class="mdc-form-field">\n                            <div class="mdc-radio mdc-radio--disabled">\n                                <input class="mdc-radio__native-control" type="radio" id="" name="" disabled>\n                                <div class="mdc-radio__background">\n                                    <div class="mdc-radio__outer-circle"></div>\n                                    <div class="mdc-radio__inner-circle"></div>\n                                </div>\n                                <div class="mdc-radio__ripple"></div>\n                            </div>\n                        </div>');
c=document.createElement("textarea");c.classList.add("textarea-line","answer__text");$(c).attr({name:"",id:"",rows:"1",placeholder:"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430",maxlength:150});a.append(c);c=document.createElement("img");c.classList.add("answer__clear");$(c).attr({src:"/static/main/images/icon/clear-24px.svg",alt:""});a.append(c);a=document.createElement("a");a.classList.add("new-answer__btn");a.text="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0451 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043e\u0442\u0432\u0435\u0442\u0430";
b.append(a);a=document.createElement("div");a.classList.add("question__footer");b.append(a);c=document.createElement("img");c.classList.add("question__urn");$(c).attr({src:"/static/main/images/icon/delete_forever-24px.svg",alt:""});a.append(c);d.append(b);$("#nextToStep2").prop({disabled:!1});f.eq(1).removeClass("disabled");w&&f.eq(2).removeClass("disabled");$(".save-as").css("visibility","visible");z.push($(b).attr("data-question-id"));50<=d.children(".question").length&&$(this).addClass("hide")});
r.on("click",".new-answer__btn",function(){var d=$(this).parent(),b=d.attr("data-question-type");if("radio"===b||"checkbox"===b)d=d.children(".question__answers"),d.append(L(b)),15<=d.children(".answer").length&&$(this).addClass("hide");else throw Error("Unexpected attribute when adding answer option");});r.on("click",".answer__clear",function(){var d=$(this).parent(),b=d.parent(),a=b.parent(),c=a.attr("data-question-type");if("radio"===c||"checkbox"===c){b=b.children(".answer").length;if(15===b)a.children(".new-answer__btn").removeClass("hide");
else if(1===b){d.children(".answer__text").val("");return}d.remove()}else throw Error("Unexpected attribute when adding answer option");});r.on("click","#cancel",function(){location.href="/polls/"});r.on("click","#saveAs",function(){e(this)});r.on("click","#nextToStep2",function(d){g(d)});r.on("click","#backToStep1",function(d){k(d)});var K;r.on("click",".category",function(){var d=$(this).attr("data-part-url"),b=$(".loader-round"),a=$(".loader__status"),c=$(".substrate"),h=$(".input__search"),p=
q.attr("data-step");if("2"===p||"3"===p){$(".category").removeClass("active-sort");$(this).addClass("active-sort");if("2"===p){var n=$("input[name=participants]:checked").attr("data-participant-id");n={pollId:t,csrfmiddlewaretoken:u,checkedTarget:n}}else"3"===p&&($("input[name=participants]:checked").each(function(v,x){checked.push($(x).attr("data-participant-id"))}),n={pollId:t,csrfmiddlewaretoken:u,checkedInterviewed:[]});$.ajax({url:"step/"+p+"/category/"+d+"/",type:"post",data:n,beforeSend:function(){clearTimeout(K);
c.addClass("disabled");b.removeClass("hide");a.removeClass("status--loading status--done status--error").addClass("status--loading");f.addClass("disabled");q.addClass("disabled")},success:function(v){if("participants"===d)h.attr({placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430\u043c...","data-mode":"participants"});else if("teams"===d)h.attr({placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c...",
"data-mode":"teams"});else throw Error("unexpected attribute when changing category");h.prop({disabled:!1});var x=$(".content");x.empty();x[0].insertAdjacentHTML("afterbegin",v.content);a.removeClass("status--loading status--done status--error").addClass("status--done");0<$("input[name=participants]:checked").length?"2"===p?$("#nextToStep3").prop({disabled:!1}):"3"===p&&$("#sendPoll").prop({disabled:!1}):"2"===p?$("#nextToStep3").prop({disabled:!0}):"3"===p&&$("#sendPoll").prop({disabled:!0})},complete:function(){c.removeClass("disabled");
K=setTimeout(function(){a.removeClass("status--loading status--done status--error");b.addClass("hide")},2E3);f.eq(0).removeClass("disabled");f.eq(1).removeClass("disabled");w&&f.eq(2).removeClass("disabled");q.removeClass("disabled")},error:function(){h.prop({disabled:!0});a.removeClass("status--loading status--done status--error").addClass("status--error")}})}});r.on("click","input[name=participants]",function(){var d=window.pageYOffset;console.log(d);var b=$(this).parent().parent().parent();0<$(".teams").length?
($(".participant-active").each(function(a,c){$(c).css({order:"initial"})}),b.css({order:-1E4})):($(".participant-active").each(function(a,c){$(c).css({order:"initial","background-color":"#FAFAFA"})}),b.css({order:-1E4,"background-color":"#F0F1F6"}));window.scrollTo(0,d);b.addClass("participant-active");$("#nextToStep3").prop({disabled:!1});w=!0;f.eq(2).addClass("disabled")});r.on("click","#nextToStep3",function(d){l(d)});r.on("click",".team__action",function(){var d=$(this).parent().parent().parent(),
b=d.attr("data-team-id");$(".team--selected").each(function(a,c){a=$(c).attr("data-team-id");b!==a&&$(c).toggleClass("team--selected")});d.toggleClass("team--selected")});var C;r.on("input",".input__search",function(d){var b=$(".sort"),a=$(".content"),c=$(".loader-round"),h=c.children(".loader__status"),p=q.attr("data-step"),n=$(".input__search").val();if("2"!==p&&"3"!==p)throw Error("Unexpected attribute on search");if("2"===p)var v={input:n,pollId:t,csrfmiddlewaretoken:u,mode:$(d.target).attr("data-mode"),
checkedTarget:$("input[name=participants]:checked").attr("data-participant-id")};else"3"===p&&($("input[name=participants]:checked").each(function(x,E){checked.push($(E).attr("data-participant-id"))}),v={input:n,pollId:t,csrfmiddlewaretoken:u,mode:$(d.target).attr("data-mode"),checkedInterviewed:[]});C=$.ajax({url:"step/"+p+"/search/",type:"post",data:v,beforeSend:function(){C&&C.abort();c.removeClass("hide");h.removeClass("status--loading status--done status--error").addClass("status--loading");
b.addClass("disabled");a.empty()},complete:function(){C=void 0;b.removeClass("disabled");c.addClass("hide");h.removeClass("status--loading status--done status--error")},success:function(x){a[0].insertAdjacentHTML("afterbegin",x.content)}})});r.on("click","[name=participants]",function(){0<$("input[name=participants]:checked").length?$("#sendPoll").prop({disabled:!1}):$("#sendPoll").prop({disabled:!0})});r.on("click","#backToStep2",function(d){m(d)});r.on("click","#sendPoll",function(d){var b=[];$("input[name=participants]:checked").each(function(a,
c){b.push($(c).attr("data-participant-id"))});$.ajax({url:"send/",type:"post",data:{pollId:t,csrfmiddlewaretoken:u,checkedInterviewed:b},beforeSend:function(){f.addClass("disabled");q.addClass("disabled")},success:function(){location.href="polls/"},error:function(){q.removeClass("disabled")}})});r.on("click",".item__link",function(d){d=$(this).parent();var b=d.attr("data-step"),a=q.attr("data-step");console.log(a,b);if(!d.hasClass("item--active")&&b!==a)if("1"===a&&"2"===b)g();else if("1"===a&&"3"===
b)A();else if("2"===a&&"1"===b)k();else if("2"===a&&"3"===b)l();else if("3"===a&&"1"===b)y();else if("3"===a&&"2"===b)m();else throw Error("Unexpected attribute when going to another step");})});

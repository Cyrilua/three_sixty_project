var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(h){return h.raw=h};$jscomp.createTemplateTagFirstArgWithRaw=function(h,l){h.raw=l;return h};
$(function(){function h(b,a,c){var d=document.createElement("div");d.classList.add(b);$(d).attr({"data-name":a,"data-id":c});c=document.createElement("div");c.classList.add("role");c.innerText=a;a=document.createElement("div");var e=a.classList;e.add(b+"__remove");e.add("remove-item");$(a).attr({id:"remove"+(b[0].toUpperCase()+b.slice(1))});b=document.createElement("div");b.classList.add("cross-in-circle");e=document.createElement("div");e.classList.add("circle");var f=document.createElement("div");
f.classList.add("line-1");var g=document.createElement("div");g.classList.add("line-2");d.prepend(c);c.prepend(a);a.prepend(b);b.prepend(e);e.prepend(f);f.prepend(g);return d}function l(b,a){var c=document.createElement("div");c.classList.add("menu__item");var d=document.createElement("div");d.classList.add("item__block");$(d).attr({"data-name":b,"data-id":a,id:"addPlatform"});d.innerText=b;b=document.createElement("div");b.classList.add("item__line");c.prepend(b);c.prepend(d);return c}function p(b){var a=
document.createElement("div");$(a).addClass("user__role _hint unselectable");var c=document.createElement("div");if("boss"===b)$(c).addClass("role role-boss _hint-up"),c.innerText="\u0411\u043e\u0441\u0441";else if("moderator"===b)$(c).addClass("role role-moderator _hint-up"),c.innerText="\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440";else if("master"===b)$(c).addClass("role role-master _hint-up"),c.innerText="\u041c\u0430\u0441\u0442\u0435\u0440 \u043e\u043f\u0440\u043e\u0441\u043e\u0432";
else throw Error("An unexpected role");$(a).prepend(c);var d=document.createElement("div");$(d).addClass("role__remove remove-item").attr({id:"removeRole"});$(c).prepend(d);c=document.createElement("div");c.classList.add("cross-in-circle");var e=document.createElement("div");e.classList.add("circle");var f=document.createElement("div");f.classList.add("line-1");var g=document.createElement("div");g.classList.add("line-2");d.prepend(c);c.prepend(e);e.prepend(f);f.prepend(g);d=document.createElement("div");
$(d).addClass("_hint-down");c=document.createElement("div");$(c).addClass("_hint-down-block");e=document.createElement("div");$(e).addClass("role-information");f=document.createElement("div");if("boss"===b)$(f).addClass("boss__info");else if("moderator"===b)$(f).addClass("moderator__info");else if("master"===b)$(f).addClass("master__info");else throw Error("An unexpected role");$(a).append(d);$(d).prepend(c);$(c).prepend(e);$(e).prepend(f);return a}var k=$("body"),m=$('input[name="csrfmiddlewaretoken"]').val(),
n;k.on("click","._hint-up-click",function(){var b=$(this.closest("._hint-click")),a=$(b).children("._hint-down-click");b.toggleClass("active");a.toggle();n=$(this).parent()});$(window).on("mouseup",function(b){var a=n;"none"===$(a).children("._hint-down-click").css("display")||null!==b.target.closest("._hint-up-click")&&null!==b.target.closest(".position__add")&&$(a).children("._hint-up-click").hasClass("position__add")||null!==b.target.closest(".platform__add")&&$(a).children("._hint-up-click").hasClass("platform__add")||
null!==b.target.closest(".role__add")&&$(a).children("._hint-up-click").hasClass("role__add")||null!==b.target.closest("._hint-down-click")&&!b.target.classList.contains("item__block")||($(a).toggleClass("active"),$(a).children("._hint-down-click").toggle())});k.on("click","#addPlatform",function(b){var a=$(b.target).closest("._hint-click"),c=a.parent(),d=$(this).attr("data-name"),e=$(this).attr("data-id"),f=a.children("._hint-down-click").children("._hint-down-block").children(".menu");$.ajax({url:"/edit/platform/add/"+
e,type:"post",data:{csrfmiddlewaretoken:m,type:"platform",id:e,name:d},success:function(g){0===c.children(".platform").length&&c.children(".empty").addClass("hide");$(a).before(h("platform",d,e));$(b.target).parent().remove();1>f.children(".menu__item").length&&$(a).addClass("hide")},error:function(){}})});k.on("click","#addPosition",function(b){var a=$(b.target).closest("._hint-click"),c=a.parent(),d=$(this).attr("data-name"),e=$(this).attr("data-id"),f=a.children("._hint-down-click").children("._hint-down-block").children(".menu");
$.ajax({url:"/edit/position/add/"+e,type:"post",data:{csrfmiddlewaretoken:m,type:"position",id:e,name:d},success:function(g){0===c.children(".position").length&&c.children(".empty").addClass("hide");$(a).before(h("position",d,e));$(b.target).parent().remove();1>f.children(".menu__item").length&&$(a).addClass("hide")},error:function(){}})});k.on("click","#addRole",function(b){var a=$(b.target).closest("._hint-click"),c=a.parent(),d=$(this).attr("data-name"),e=a.children("._hint-down-click").children("._hint-down-block").children(".menu");
console.log("typeSubstrate",a);console.log("rolesBlock",c);console.log("name",d);console.log("menuRoles",e);0===c.children(".position").length&&c.children(".empty").addClass("hide");$(a).before(p(d));$(b.target).parent().remove();1>e.children(".menu__item").length&&$(a).addClass("hide")});k.on("click","#removePlatform",function(){var b=$(this).parent().parent(),a=b.attr("data-name"),c=b.attr("data-id"),d=b.parent(),e=d.children(".platform__substrate"),f=e.children("._hint-down-click").children("._hint-down-block").children(".menu");
$.ajax({url:"/edit/platform/remove/"+c,type:"post",data:{csrfmiddlewaretoken:m,type:"platform",id:c,name:a},success:function(g){0===f.children(".menu__item").length&&e.removeClass("hide");f.prepend(l(a,c));b.remove();0===d.children(".platform").length&&d.children(".empty").removeClass("hide")},error:function(){}})});k.on("click","#removePosition",function(){var b=$(this).parent().parent(),a=b.attr("data-name"),c=b.attr("data-id"),d=b.parent(),e=d.children(".position__substrate"),f=e.children("._hint-down-click").children("._hint-down-block").children(".menu");
$.ajax({url:"/edit/position/remove/"+c,type:"post",data:{csrfmiddlewaretoken:m,type:"position",id:c,name:a},success:function(g){0===f.children(".menu__item").length&&e.removeClass("hide");f.prepend(l(a,c));b.remove();0===d.children(".position").length&&d.children(".empty").removeClass("hide")},error:function(){}})});k.on("click","#edit",function(b){var a=$(this).closest(".user");a.hasClass("user--view")?(b=a[0].getBoundingClientRect(),$(".user--edit").removeClass("user--edit").addClass("user--view"),
a.removeClass("user--view").addClass("user--edit"),a=a[0].getBoundingClientRect(),window.scrollBy(0,-(b.y-a.y))):a.hasClass("user--edit")&&a.removeClass("user--edit").addClass("user--view")})});

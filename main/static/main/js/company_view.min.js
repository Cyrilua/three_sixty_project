var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(h){return h.raw=h};$jscomp.createTemplateTagFirstArgWithRaw=function(h,p){h.raw=p;return h};
$(function(){function h(a,b,c,d){d=void 0===d?!0:d;if("position"!==a&&"platform"!==a)throw Error("An expected type");var e=document.createElement("div");$(e).attr({"data-name":b,"data-id":c});d?$(e).addClass(a):$(e).addClass(a+" _hint");c=document.createElement("div");d?$(c).addClass("role"):$(c).addClass("role _hint-up");c.innerText=b;if(d){b=document.createElement("div");d=b.classList;d.add(a+"__remove");d.add("remove-item");$(b).attr({id:"remove"+(a[0].toUpperCase()+a.slice(1))});a=document.createElement("div");
a.classList.add("cross-in-circle");d=document.createElement("div");d.classList.add("circle");var f=document.createElement("div");f.classList.add("line-1");var g=document.createElement("div");g.classList.add("line-2");c.prepend(b);b.prepend(a);a.prepend(d);d.prepend(f);f.prepend(g)}else b=document.createElement("div"),$(b).addClass("_hint-down"),d=document.createElement("div"),$(d).addClass("_hint-down-block"),f=document.createElement("div"),$(f).addClass(a+"-information role-information"),g=document.createElement("div"),
$(g).addClass(a+"__info"),$(e).prepend(b),$(b).prepend(d),$(d).prepend(f),$(f).prepend(g);e.prepend(c);return e}function p(a,b,c){var d=document.createElement("div");d.classList.add("menu__item");var e=document.createElement("div");e.classList.add("item__block");$(e).attr({"data-name":b,"data-id":c,id:"add"+(a[0].toUpperCase()+a.slice(1))});e.innerText=b;a=document.createElement("div");a.classList.add("item__line");d.prepend(a);d.prepend(e);return d}function r(a){if("master"!==a&&"moderator"!==a)throw Error("An expected type");
var b=document.createElement("div");$(b).addClass("user__role _hint unselectable").attr({"data-role":a});var c=document.createElement("div");$(c).addClass("role role-"+a+" _hint-up");if("boss"===a)throw Error("An unexpected role");if("moderator"===a)c.innerText="\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440";else if("master"===a)c.innerText="\u041c\u0430\u0441\u0442\u0435\u0440 \u043e\u043f\u0440\u043e\u0441\u043e\u0432";else throw Error("An unexpected role");$(b).prepend(c);var d=document.createElement("div");
$(d).addClass("role__remove remove-item").attr({id:"removeRole"});$(c).prepend(d);c=document.createElement("div");c.classList.add("cross-in-circle");var e=document.createElement("div");e.classList.add("circle");var f=document.createElement("div");f.classList.add("line-1");var g=document.createElement("div");g.classList.add("line-2");d.prepend(c);c.prepend(e);e.prepend(f);f.prepend(g);d=document.createElement("div");$(d).addClass("_hint-down");c=document.createElement("div");$(c).addClass("_hint-down-block");
e=document.createElement("div");$(e).addClass("role-information");f=document.createElement("div");$(f).addClass(a+"__info");$(b).append(d);$(d).prepend(c);$(c).prepend(e);$(e).prepend(f);return b}function t(a){var b=document.createElement("div");$(b).addClass("user__role _hint unselectable").attr({"data-role":a});var c=document.createElement("div");if("boss"===a)throw Error("An unexpected role");if("moderator"===a)$(c).addClass("role-mini role-moderator _hint-up");else if("master"===a)$(c).addClass("role-mini role-master _hint-up");
else throw Error("An unexpected role");$(b).prepend(c);c=document.createElement("div");$(c).addClass("_hint-down");var d=document.createElement("div");$(d).addClass("_hint-down-block");var e=document.createElement("div");$(e).addClass("role-information");var f=document.createElement("div");if("boss"===a)throw Error("An unexpected role");if("moderator"===a)$(f).addClass("moderator__info");else if("master"===a)$(f).addClass("master__info");else throw Error("An unexpected role");$(b).append(c);$(c).prepend(d);
$(d).prepend(e);$(e).prepend(f);return b}function u(a){var b=document.createElement("div");b.classList.add("menu__item");var c=document.createElement("div");c.classList.add("item__block");$(c).attr({"data-role":a,id:"addRole"});if("boss"===a)throw Error("An unexpected role");if("moderator"===a)c.innerText="\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440";else if("master"===a)c.innerText="\u041c\u0430\u0441\u0442\u0435\u0440 \u043e\u043f\u0440\u043e\u0441\u043e\u0432";else throw Error("An unexpected role");
a=document.createElement("div");a.classList.add("item__line");b.prepend(a);b.prepend(c);return b}var l=$("body"),n=$('input[name="csrfmiddlewaretoken"]').val(),q;l.on("click","._hint-up-click",function(){var a=$(this.closest("._hint-click")),b=$(a).children("._hint-down-click");a.toggleClass("active");b.toggle();q=$(this).parent()});$(window).on("mouseup",function(a){var b=q;"none"===$(b).children("._hint-down-click").css("display")||null!==a.target.closest("._hint-up-click")&&null!==a.target.closest(".position__add")&&
$(b).children("._hint-up-click").hasClass("position__add")||null!==a.target.closest(".platform__add")&&$(b).children("._hint-up-click").hasClass("platform__add")||null!==a.target.closest(".role__add")&&$(b).children("._hint-up-click").hasClass("role__add")||null!==a.target.closest("._hint-down-click")&&!a.target.classList.contains("item__block")||($(b).toggleClass("active"),$(b).children("._hint-down-click").toggle())});l.on("click","#addPlatform",function(a){var b=$(a.target).closest("._hint-click"),
c=b.parent(),d=$(this).attr("data-name"),e=$(this).attr("data-id"),f=b.children("._hint-down-click").children("._hint-down-block").children(".menu"),g=c.parent().parent().parent().parent(),k=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms"),m=k.children(".platform:last");g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/platform/"+e+"/add/",type:"post",data:{csrfmiddlewaretoken:n,namePlatform:d},success:function(v){0===c.children(".platform").length&&
c.children(".empty").addClass("hide");$(b).before(h("platform",d,e));$(a.target).parent().remove();1>f.children(".menu__item").length&&$(b).addClass("hide");1===m.length?m.after(h("platform",d,e,!1)):k.append(h("platform",d,e,!1))},error:function(){}})});l.on("click","#addPosition",function(a){var b=$(a.target).closest("._hint-click"),c=b.parent(),d=$(this).attr("data-name"),e=$(this).attr("data-id"),f=b.children("._hint-down-click").children("._hint-down-block").children(".menu"),g=c.parent().parent().parent().parent(),
k=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms"),m=k.children(".position:last");g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/position/"+e+"/add/",type:"post",data:{csrfmiddlewaretoken:n,namePosition:d},success:function(v){0===c.children(".position").length&&c.children(".empty").addClass("hide");$(b).before(h("position",d,e));$(a.target).parent().remove();1>f.children(".menu__item").length&&$(b).addClass("hide");1===m.length?m.after(h("position",
d,e,!1)):k.prepend(h("position",d,e,!1))},error:function(){}})});l.on("click","#addRole",function(a){var b=$(a.target).closest("._hint-click"),c=b.parent(),d=$(this).attr("data-role"),e=b.children("._hint-down-click").children("._hint-down-block").children(".menu"),f=c.parent().parent().parent().parent().parent(),g=f.children(".user__view").children(".info").children(".info__top");f=f.attr("data-real-id");$.ajax({url:"user/"+f+"/edit/role/add/",type:"post",data:{csrfmiddlewaretoken:n,roleName:d},
success:function(k){0===c.children(".user__role").length&&c.children(".empty").addClass("hide");$(b).before(r(d));$(a.target).parent().remove();1>e.children(".menu__item").length&&$(b).addClass("hide");g.append(t(d))},error:function(){}})});l.on("click","#removePlatform",function(){var a=$(this).parent().parent(),b=a.attr("data-name"),c=a.attr("data-id"),d=a.parent(),e=d.children(".platform__substrate"),f=e.children("._hint-down-click").children("._hint-down-block").children(".menu"),g=d.parent().parent().parent().parent(),
k=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms").children('.platform[data-id="'+c+'"]');g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/platform/"+c+"/remove/",type:"post",data:{csrfmiddlewaretoken:n,namePlatform:b},success:function(m){0===f.children(".menu__item").length&&e.removeClass("hide");f.prepend(p("platform",b,c));a.remove();0===d.children(".platform").length&&d.children(".empty").removeClass("hide");k.remove()},error:function(){}})});
l.on("click","#removePosition",function(){var a=$(this).parent().parent(),b=a.attr("data-name"),c=a.attr("data-id"),d=a.parent(),e=d.children(".position__substrate"),f=e.children("._hint-down-click").children("._hint-down-block").children(".menu"),g=d.parent().parent().parent().parent(),k=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms").children('.position[data-id="'+c+'"]');g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/position/"+c+
"/remove/",type:"post",data:{csrfmiddlewaretoken:n,namePosition:b},success:function(m){0===f.children(".menu__item").length&&e.removeClass("hide");f.prepend(p("position",b,c));a.remove();0===d.children(".position").length&&d.children(".empty").removeClass("hide");k.remove()},error:function(){}})});l.on("click","#removeRole",function(){var a=$(this).parent().parent(),b=a.attr("data-role");if("boss"===b)Snackbar.show({text:"\u041d\u0435\u043b\u044c\u0437\u044f \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u043e\u043b\u044c \u0431\u043e\u0441\u0441\u0430",
textColor:"#ff1841",showAction:!1,duration:4E3,customClass:"custom"});else{var c=a.parent(),d=c.children(".role__substrate"),e=d.children("._hint-down-click").children("._hint-down-block").children(".menu"),f=a.parent().parent().parent().parent().parent().parent(),g=f.children(".user__view").children(".info").children(".info__top").children(".user__role[data-role="+b+"]");f=f.attr("data-real-id");$.ajax({url:"user/"+f+"/edit/role/remove/",type:"post",data:{csrfmiddlewaretoken:n,roleName:b},success:function(k){0===
e.children(".menu__item").length&&d.removeClass("hide");e.prepend(u(b));a.remove();0===c.children(".user__role").length&&c.children(".empty").removeClass("hide");g.remove()},error:function(){}})}});l.on("click","#edit",function(a){var b=$(this).closest(".user");b.hasClass("user--view")?(a=b[0].getBoundingClientRect(),$(".user--edit").removeClass("user--edit").addClass("user--view"),b.removeClass("user--view").addClass("user--edit"),b=b[0].getBoundingClientRect(),window.scrollBy(0,-(a.y-b.y))):b.hasClass("user--edit")&&
b.removeClass("user--edit").addClass("user--view")})});

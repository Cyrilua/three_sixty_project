var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(l){return l.raw=l};$jscomp.createTemplateTagFirstArgWithRaw=function(l,r){l.raw=r;return l};
$(function(){function l(a,b,d,c){c=void 0===c?!0:c;if("position"!==a&&"platform"!==a)throw Error("An expected type");var e=document.createElement("div");$(e).attr({"data-name":b,"data-id":d});c?$(e).addClass(a):$(e).addClass(a+" _hint");d=document.createElement("div");c?$(d).addClass("role"):$(d).addClass("role _hint-up");d.innerText=b;if(c){b=document.createElement("div");c=b.classList;c.add(a+"__remove");c.add("remove-item");$(b).attr({id:"remove"+(a[0].toUpperCase()+a.slice(1))});a=document.createElement("div");
a.classList.add("cross-in-circle");c=document.createElement("div");c.classList.add("circle");var f=document.createElement("div");f.classList.add("line-1");var g=document.createElement("div");g.classList.add("line-2");d.prepend(b);b.prepend(a);a.prepend(c);c.prepend(f);f.prepend(g)}else b=document.createElement("div"),$(b).addClass("_hint-down"),c=document.createElement("div"),$(c).addClass("_hint-down-block"),f=document.createElement("div"),$(f).addClass(a+"-information role-information"),g=document.createElement("div"),
$(g).addClass(a+"__info"),$(e).prepend(b),$(b).prepend(c),$(c).prepend(f),$(f).prepend(g);e.prepend(d);return e}function r(a,b,d){var c=document.createElement("div");c.classList.add("menu__item");var e=document.createElement("div");e.classList.add("item__block");$(e).attr({"data-name":b,"data-id":d,id:"add"+(a[0].toUpperCase()+a.slice(1))});e.innerText=b;a=document.createElement("div");a.classList.add("item__line");c.prepend(a);c.prepend(e);return c}function y(a){if("master"!==a&&"moderator"!==a)throw Error("An expected type");
var b=document.createElement("div");$(b).addClass("user__role _hint unselectable").attr({"data-role":a});var d=document.createElement("div");$(d).addClass("role role-"+a+" _hint-up");if("boss"===a)throw Error("An unexpected role");if("moderator"===a)d.innerText="\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440";else if("master"===a)d.innerText="\u041c\u0430\u0441\u0442\u0435\u0440 \u043e\u043f\u0440\u043e\u0441\u043e\u0432";else throw Error("An unexpected role");$(b).prepend(d);var c=document.createElement("div");
$(c).addClass("role__remove remove-item").attr({id:"removeRole"});$(d).prepend(c);d=document.createElement("div");d.classList.add("cross-in-circle");var e=document.createElement("div");e.classList.add("circle");var f=document.createElement("div");f.classList.add("line-1");var g=document.createElement("div");g.classList.add("line-2");c.prepend(d);d.prepend(e);e.prepend(f);f.prepend(g);c=document.createElement("div");$(c).addClass("_hint-down");d=document.createElement("div");$(d).addClass("_hint-down-block");
e=document.createElement("div");$(e).addClass("role-information");f=document.createElement("div");$(f).addClass(a+"__info");$(b).append(c);$(c).prepend(d);$(d).prepend(e);$(e).prepend(f);return b}function z(a){var b=document.createElement("div");$(b).addClass("user__role _hint unselectable").attr({"data-role":a});var d=document.createElement("div");if("boss"===a)throw Error("An unexpected role");if("moderator"===a)$(d).addClass("role-mini role-moderator _hint-up");else if("master"===a)$(d).addClass("role-mini role-master _hint-up");
else throw Error("An unexpected role");$(b).prepend(d);d=document.createElement("div");$(d).addClass("_hint-down");var c=document.createElement("div");$(c).addClass("_hint-down-block");var e=document.createElement("div");$(e).addClass("role-information");var f=document.createElement("div");if("boss"===a)throw Error("An unexpected role");if("moderator"===a)$(f).addClass("moderator__info");else if("master"===a)$(f).addClass("master__info");else throw Error("An unexpected role");$(b).append(d);$(d).prepend(c);
$(c).prepend(e);$(e).prepend(f);return b}function A(a){var b=document.createElement("div");b.classList.add("menu__item");var d=document.createElement("div");d.classList.add("item__block");$(d).attr({"data-role":a,id:"addRole"});if("boss"===a)throw Error("An unexpected role");if("moderator"===a)d.innerText="\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440";else if("master"===a)d.innerText="\u041c\u0430\u0441\u0442\u0435\u0440 \u043e\u043f\u0440\u043e\u0441\u043e\u0432";else throw Error("An unexpected role");
a=document.createElement("div");a.classList.add("item__line");b.prepend(a);b.prepend(d);return b}function v(a){for(var b=0;b<a.length;b++)a[b].finish||$.ajax(a[b].request)}function w(a,b,d){var c=$(".search");$.ajax({url:"load/",type:"get",data:{category:b,search:d},beforeSend:function(e){t&&t.abort();t=e;u.addClass("loading");d||c.prop({disabled:!0})},success:function(e){$(".active-sort[data-category="+a+"]").removeClass("active-sort");$(".category[data-category="+b+"]").addClass("active-sort");
u.empty().prepend(e.content)},complete:function(e,f){u.removeClass("loading");d||c.prop({disabled:!1})},error:function(){Snackbar.show({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445.",textColor:"#ff0000",customClass:"custom no-animation",showAction:!1,duration:3E3})}})}var k=$("body"),m=$('input[name="csrfmiddlewaretoken"]').val(),u=$(".content__body"),
n=[],p=[],t;k.on("click","#newPoll",function(a){});k.on("input",".search",function(a){a=$(".active-sort").attr("data-category");var b=$(this).val();w(a,a,b)});k.on("click",".category",function(a){a=$(".active-sort").attr("data-category");var b=$(this).attr("data-category");a!==b&&w(a,b)});window.onbeforeunload=function(){v(p);v(n)};window.onunload=function(){};k.on("click","#removeTeam",function(a){var b=$(this).parent(),d=b.children(".team__info").children(".team__name").children(".team__name").text();
a=b.attr("data-team-id");var c;$.ajax({url:"team/"+a+"/remove/",type:"post",data:{csrfmiddlewaretoken:m},beforeSend:function(e,f){if(!n[c]){c=n.length;e.abort();n.push({request:f,finish:!1});b.addClass("hide");var g=setTimeout(function(){n[c].finish||$.ajax(f)},5E3);Snackbar.show({text:"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 "+d+" \u0431\u044b\u043b\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430",customClass:"custom no-animation center",actionText:"\u041e\u0442\u043c\u0435\u043d\u0430",actionTextColor:"yellow",
width:"910px",pos:"bottom-center",duration:5E3,onActionClick:function(h){clearTimeout(g);$(h).remove();n[c].finish=!0;b.removeClass("hide")}})}},success:function(e){b.remove()},complete:function(){n[c].finish=!0},error:function(){b.removeClass("hide");Snackbar.show({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435 \u0432o \u043a\u043e\u043c\u0430\u043d\u0434\u044b.",textColor:"#ff0000",customClass:"custom no-animation",
showAction:!1,duration:3E3})}})});k.on("click","#dismiss",function(a){var b=$(this).parent().parent().parent().parent(),d=b.children(".user__view").children(".info").children(".info__top").children(".user-href").text();a=b.attr("data-real-id");var c;$.ajax({url:"user/"+a+"/dismiss/",type:"post",data:{csrfmiddlewaretoken:m},beforeSend:function(e,f){if(!p[c]){c=p.length;e.abort();p.push({request:f,finish:!1});b.addClass("hide");var g=setTimeout(function(){p[c].finish||$.ajax(f)},5E3);Snackbar.show({text:d+
" \u0431\u044b\u043b \u0443\u0434\u0430\u043b\u0435\u043d \u0438\u0437 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",customClass:"custom no-animation center",actionText:"\u041e\u0442\u043c\u0435\u043d\u0430",actionTextColor:"yellow",width:"910px",pos:"bottom-center",duration:5E3,onActionClick:function(h){clearTimeout(g);$(h).remove();p[c].finish=!0;b.removeClass("hide")}})}},success:function(e){b.remove()},complete:function(){p[c].finish=!0},error:function(){b.removeClass("hide");Snackbar.show({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435 \u0432o \u043a\u043e\u043c\u0430\u043d\u0434\u044b.",
textColor:"#ff0000",customClass:"custom no-animation",showAction:!1,duration:3E3})}})});var x;k.on("click","._hint-up-click",function(){var a=$(this.closest("._hint-click")),b=$(a).children("._hint-down-click");a.toggleClass("active");b.toggle();x=$(this).parent()});$(window).on("mouseup",function(a){var b=x;"none"===$(b).children("._hint-down-click").css("display")||null!==a.target.closest("._hint-up-click")&&null!==a.target.closest(".position__add")&&$(b).children("._hint-up-click").hasClass("position__add")||
null!==a.target.closest(".platform__add")&&$(b).children("._hint-up-click").hasClass("platform__add")||null!==a.target.closest(".role__add")&&$(b).children("._hint-up-click").hasClass("role__add")||null!==a.target.closest("._hint-down-click")&&!a.target.classList.contains("item__block")||($(b).toggleClass("active"),$(b).children("._hint-down-click").toggle())});k.on("click","#addPlatform",function(a){var b=$(a.target).closest("._hint-click"),d=b.parent(),c=$(this).attr("data-name"),e=$(this).attr("data-id"),
f=b.children("._hint-down-click").children("._hint-down-block").children(".menu"),g=d.parent().parent().parent().parent(),h=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms"),q=h.children(".platform:last");g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/platform/"+e+"/add/",type:"post",data:{csrfmiddlewaretoken:m,namePlatform:c},success:function(B){0===d.children(".platform").length&&d.children(".empty").addClass("hide");$(b).before(l("platform",
c,e));$(a.target).parent().remove();1>f.children(".menu__item").length&&$(b).addClass("hide");1===q.length?q.after(l("platform",c,e,!1)):h.append(l("platform",c,e,!1))},error:function(){}})});k.on("click","#addPosition",function(a){var b=$(a.target).closest("._hint-click"),d=b.parent(),c=$(this).attr("data-name"),e=$(this).attr("data-id"),f=b.children("._hint-down-click").children("._hint-down-block").children(".menu"),g=d.parent().parent().parent().parent(),h=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms"),
q=h.children(".position:last");g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/position/"+e+"/add/",type:"post",data:{csrfmiddlewaretoken:m,namePosition:c},success:function(B){0===d.children(".position").length&&d.children(".empty").addClass("hide");$(b).before(l("position",c,e));$(a.target).parent().remove();1>f.children(".menu__item").length&&$(b).addClass("hide");1===q.length?q.after(l("position",c,e,!1)):h.prepend(l("position",c,e,!1))},error:function(){}})});k.on("click","#addRole",function(a){var b=
$(a.target).closest("._hint-click"),d=b.parent(),c=$(this).attr("data-role"),e=b.children("._hint-down-click").children("._hint-down-block").children(".menu"),f=d.parent().parent().parent().parent().parent(),g=f.children(".user__view").children(".info").children(".info__top");f=f.attr("data-real-id");$.ajax({url:"user/"+f+"/edit/role/add/",type:"post",data:{csrfmiddlewaretoken:m,roleName:c},success:function(h){0===d.children(".user__role").length&&d.children(".empty").addClass("hide");$(b).before(y(c));
$(a.target).parent().remove();1>e.children(".menu__item").length&&$(b).addClass("hide");g.append(z(c))},error:function(){}})});k.on("click","#removePlatform",function(){var a=$(this).parent().parent(),b=a.attr("data-name"),d=a.attr("data-id"),c=a.parent(),e=c.children(".platform__substrate"),f=e.children("._hint-down-click").children("._hint-down-block").children(".menu"),g=c.parent().parent().parent().parent(),h=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms").children('.platform[data-id="'+
d+'"]');g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/platform/"+d+"/remove/",type:"post",data:{csrfmiddlewaretoken:m,namePlatform:b},success:function(q){0===f.children(".menu__item").length&&e.removeClass("hide");f.prepend(r("platform",b,d));a.remove();0===c.children(".platform").length&&c.children(".empty").removeClass("hide");h.remove()},error:function(){}})});k.on("click","#removePosition",function(){var a=$(this).parent().parent(),b=a.attr("data-name"),d=a.attr("data-id"),c=a.parent(),
e=c.children(".position__substrate"),f=e.children("._hint-down-click").children("._hint-down-block").children(".menu"),g=c.parent().parent().parent().parent(),h=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms").children('.position[data-id="'+d+'"]');g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/position/"+d+"/remove/",type:"post",data:{csrfmiddlewaretoken:m,namePosition:b},success:function(q){0===f.children(".menu__item").length&&e.removeClass("hide");
f.prepend(r("position",b,d));a.remove();0===c.children(".position").length&&c.children(".empty").removeClass("hide");h.remove()},error:function(){}})});k.on("click","#removeRole",function(){var a=$(this).parent().parent(),b=a.attr("data-role");if("boss"===b)Snackbar.show({text:"\u041d\u0435\u043b\u044c\u0437\u044f \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u043e\u043b\u044c \u0431\u043e\u0441\u0441\u0430",textColor:"#ff1841",showAction:!1,duration:4E3,customClass:"custom"});else{var d=a.parent(),
c=d.children(".role__substrate"),e=c.children("._hint-down-click").children("._hint-down-block").children(".menu"),f=a.parent().parent().parent().parent().parent().parent(),g=f.children(".user__view").children(".info").children(".info__top").children(".user__role[data-role="+b+"]");f=f.attr("data-real-id");$.ajax({url:"user/"+f+"/edit/role/remove/",type:"post",data:{csrfmiddlewaretoken:m,roleName:b},success:function(h){0===e.children(".menu__item").length&&c.removeClass("hide");e.prepend(A(b));a.remove();
0===d.children(".user__role").length&&d.children(".empty").removeClass("hide");g.remove()},error:function(){}})}});k.on("click","#edit",function(a){var b=$(this).closest(".user");b.hasClass("user--view")?(a=b[0].getBoundingClientRect(),$(".user--edit").removeClass("user--edit").addClass("user--view"),b.removeClass("user--view").addClass("user--edit"),b=b[0].getBoundingClientRect(),window.scrollBy(0,-(a.y-b.y))):b.hasClass("user--edit")&&b.removeClass("user--edit").addClass("user--view")});$(".category[data-category=teams]").trigger("click")});

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(h){return h.raw=h};$jscomp.createTemplateTagFirstArgWithRaw=function(h,l){h.raw=l;return h};
$(function(){function h(a,b,c){var e=document.createElement("div");e.classList.add(a);$(e).attr({"data-name":b,"data-id":c});c=document.createElement("div");c.classList.add("role");c.innerText=b;b=document.createElement("div");var d=b.classList;d.add(a+"__remove");d.add("remove-item");$(b).attr({id:"remove"+(a[0].toUpperCase()+a.slice(1))});a=document.createElement("div");a.classList.add("cross-in-circle");d=document.createElement("div");d.classList.add("circle");var f=document.createElement("div");
f.classList.add("line-1");var g=document.createElement("div");g.classList.add("line-2");e.prepend(c);c.prepend(b);b.prepend(a);a.prepend(d);d.prepend(f);f.prepend(g);return e}function l(a,b,c){var e=document.createElement("div");e.classList.add("menu__item");var d=document.createElement("div");d.classList.add("item__block");$(d).attr({"data-name":b,"data-id":c,id:"add"+(a[0].toUpperCase()+a.slice(1))});d.innerText=b;a=document.createElement("div");a.classList.add("item__line");e.prepend(a);e.prepend(d);
return e}function p(a){var b=document.createElement("div");$(b).addClass("user__role _hint unselectable").attr({"data-role":a});var c=document.createElement("div");if("boss"===a)throw Error("An unexpected role");if("moderator"===a)$(c).addClass("role role-moderator _hint-up"),c.innerText="\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440";else if("master"===a)$(c).addClass("role role-master _hint-up"),c.innerText="\u041c\u0430\u0441\u0442\u0435\u0440 \u043e\u043f\u0440\u043e\u0441\u043e\u0432";
else throw Error("An unexpected role");$(b).prepend(c);var e=document.createElement("div");$(e).addClass("role__remove remove-item").attr({id:"removeRole"});$(c).prepend(e);c=document.createElement("div");c.classList.add("cross-in-circle");var d=document.createElement("div");d.classList.add("circle");var f=document.createElement("div");f.classList.add("line-1");var g=document.createElement("div");g.classList.add("line-2");e.prepend(c);c.prepend(d);d.prepend(f);f.prepend(g);e=document.createElement("div");
$(e).addClass("_hint-down");c=document.createElement("div");$(c).addClass("_hint-down-block");d=document.createElement("div");$(d).addClass("role-information");f=document.createElement("div");if("boss"===a)throw Error("An unexpected role");if("moderator"===a)$(f).addClass("moderator__info");else if("master"===a)$(f).addClass("master__info");else throw Error("An unexpected role");$(b).append(e);$(e).prepend(c);$(c).prepend(d);$(d).prepend(f);return b}function q(a){var b=document.createElement("div");
b.classList.add("menu__item");var c=document.createElement("div");c.classList.add("item__block");$(c).attr({"data-role":a,id:"addRole"});if("boss"===a)throw Error("An unexpected role");if("moderator"===a)c.innerText="\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440";else if("master"===a)c.innerText="\u041c\u0430\u0441\u0442\u0435\u0440 \u043e\u043f\u0440\u043e\u0441\u043e\u0432";else throw Error("An unexpected role");a=document.createElement("div");a.classList.add("item__line");b.prepend(a);
b.prepend(c);return b}var k=$("body"),m=$('input[name="csrfmiddlewaretoken"]').val(),n;k.on("click","._hint-up-click",function(){var a=$(this.closest("._hint-click")),b=$(a).children("._hint-down-click");a.toggleClass("active");b.toggle();n=$(this).parent()});$(window).on("mouseup",function(a){var b=n;"none"===$(b).children("._hint-down-click").css("display")||null!==a.target.closest("._hint-up-click")&&null!==a.target.closest(".position__add")&&$(b).children("._hint-up-click").hasClass("position__add")||
null!==a.target.closest(".platform__add")&&$(b).children("._hint-up-click").hasClass("platform__add")||null!==a.target.closest(".role__add")&&$(b).children("._hint-up-click").hasClass("role__add")||null!==a.target.closest("._hint-down-click")&&!a.target.classList.contains("item__block")||($(b).toggleClass("active"),$(b).children("._hint-down-click").toggle())});k.on("click","#addPlatform",function(a){var b=$(a.target).closest("._hint-click"),c=b.parent(),e=$(this).attr("data-name"),d=$(this).attr("data-id"),
f=b.children("._hint-down-click").children("._hint-down-block").children(".menu");$.ajax({url:"/edit/platform/add/"+d,type:"post",data:{csrfmiddlewaretoken:m,type:"platform",id:d,name:e},success:function(g){0===c.children(".platform").length&&c.children(".empty").addClass("hide");$(b).before(h("platform",e,d));$(a.target).parent().remove();1>f.children(".menu__item").length&&$(b).addClass("hide")},error:function(){}})});k.on("click","#addPosition",function(a){var b=$(a.target).closest("._hint-click"),
c=b.parent(),e=$(this).attr("data-name"),d=$(this).attr("data-id"),f=b.children("._hint-down-click").children("._hint-down-block").children(".menu");$.ajax({url:"/edit/position/add/"+d,type:"post",data:{csrfmiddlewaretoken:m,type:"position",id:d,name:e},success:function(g){0===c.children(".position").length&&c.children(".empty").addClass("hide");$(b).before(h("position",e,d));$(a.target).parent().remove();1>f.children(".menu__item").length&&$(b).addClass("hide")},error:function(){}})});k.on("click",
"#addRole",function(a){var b=$(a.target).closest("._hint-click"),c=b.parent(),e=$(this).attr("data-role"),d=b.children("._hint-down-click").children("._hint-down-block").children(".menu");0===c.children(".position").length&&c.children(".empty").addClass("hide");$(b).before(p(e));$(a.target).parent().remove();1>d.children(".menu__item").length&&$(b).addClass("hide")});k.on("click","#removePlatform",function(){var a=$(this).parent().parent(),b=a.attr("data-name"),c=a.attr("data-id"),e=a.parent(),d=
e.children(".platform__substrate"),f=d.children("._hint-down-click").children("._hint-down-block").children(".menu");$.ajax({url:"/edit/platform/remove/"+c,type:"post",data:{csrfmiddlewaretoken:m,type:"platform",id:c,name:b},success:function(g){0===f.children(".menu__item").length&&d.removeClass("hide");f.prepend(l("platform",b,c));a.remove();0===e.children(".platform").length&&e.children(".empty").removeClass("hide")},error:function(){}})});k.on("click","#removePosition",function(){var a=$(this).parent().parent(),
b=a.attr("data-name"),c=a.attr("data-id"),e=a.parent(),d=e.children(".position__substrate"),f=d.children("._hint-down-click").children("._hint-down-block").children(".menu");$.ajax({url:"/edit/position/remove/"+c,type:"post",data:{csrfmiddlewaretoken:m,type:"position",id:c,name:b},success:function(g){0===f.children(".menu__item").length&&d.removeClass("hide");f.prepend(l("position",b,c));a.remove();0===e.children(".position").length&&e.children(".empty").removeClass("hide")},error:function(){}})});
k.on("click","#removeRole",function(){var a=$(this).parent().parent(),b=a.attr("data-role");if("boss"===b)Snackbar.show({text:"\u041d\u0435\u043b\u044c\u0437\u044f \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u043e\u043b\u044c \u0431\u043e\u0441\u0441\u0430",textColor:"#ff1841",showAction:!1,duration:4E3,customClass:"custom"});else{var c=a.parent(),e=c.children(".role__substrate"),d=e.children("._hint-down-click").children("._hint-down-block").children(".menu");0===d.children(".menu__item").length&&
e.removeClass("hide");d.prepend(q(b));a.remove();0===c.children(".user__role").length&&c.children(".empty").removeClass("hide")}});k.on("click","#edit",function(a){var b=$(this).closest(".user");b.hasClass("user--view")?(a=b[0].getBoundingClientRect(),$(".user--edit").removeClass("user--edit").addClass("user--view"),b.removeClass("user--view").addClass("user--edit"),b=b[0].getBoundingClientRect(),window.scrollBy(0,-(a.y-b.y))):b.hasClass("user--edit")&&b.removeClass("user--edit").addClass("user--view")})});

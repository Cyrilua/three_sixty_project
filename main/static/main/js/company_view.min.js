var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(l){return l.raw=l};$jscomp.createTemplateTagFirstArgWithRaw=function(l,r){l.raw=r;return l};
$(function(){function l(b,a,d,c){c=void 0===c?!0:c;if("position"!==b&&"platform"!==b)throw Error("An expected type");var e=document.createElement("div");$(e).attr({"data-name":a,"data-id":d});c?$(e).addClass(b):$(e).addClass(b+" _hint");d=document.createElement("div");c?$(d).addClass("role"):$(d).addClass("role _hint-up");d.innerText=a;if(c){a=document.createElement("div");c=a.classList;c.add(b+"__remove");c.add("remove-item");$(a).attr({id:"remove"+(b[0].toUpperCase()+b.slice(1))});b=document.createElement("div");
b.classList.add("cross-in-circle");c=document.createElement("div");c.classList.add("circle");var f=document.createElement("div");f.classList.add("line-1");var g=document.createElement("div");g.classList.add("line-2");d.prepend(a);a.prepend(b);b.prepend(c);c.prepend(f);f.prepend(g)}else a=document.createElement("div"),$(a).addClass("_hint-down"),c=document.createElement("div"),$(c).addClass("_hint-down-block"),f=document.createElement("div"),$(f).addClass(b+"-information role-information"),g=document.createElement("div"),
$(g).addClass(b+"__info"),$(e).prepend(a),$(a).prepend(c),$(c).prepend(f),$(f).prepend(g);e.prepend(d);return e}function r(b,a,d){var c=document.createElement("div");c.classList.add("menu__item");var e=document.createElement("div");e.classList.add("item__block");$(e).attr({"data-name":a,"data-id":d,id:"add"+(b[0].toUpperCase()+b.slice(1))});e.innerText=a;b=document.createElement("div");b.classList.add("item__line");c.prepend(b);c.prepend(e);return c}function y(b){if("master"!==b&&"moderator"!==b)throw Error("An expected type");
var a=document.createElement("div");$(a).addClass("user__role _hint unselectable").attr({"data-role":b});var d=document.createElement("div");$(d).addClass("role role-"+b+" _hint-up");if("boss"===b)throw Error("An unexpected role");if("moderator"===b)d.innerText="\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440";else if("master"===b)d.innerText="\u041c\u0430\u0441\u0442\u0435\u0440 \u043e\u043f\u0440\u043e\u0441\u043e\u0432";else throw Error("An unexpected role");$(a).prepend(d);var c=document.createElement("div");
$(c).addClass("role__remove remove-item").attr({id:"removeRole"});$(d).prepend(c);d=document.createElement("div");d.classList.add("cross-in-circle");var e=document.createElement("div");e.classList.add("circle");var f=document.createElement("div");f.classList.add("line-1");var g=document.createElement("div");g.classList.add("line-2");c.prepend(d);d.prepend(e);e.prepend(f);f.prepend(g);c=document.createElement("div");$(c).addClass("_hint-down");d=document.createElement("div");$(d).addClass("_hint-down-block");
e=document.createElement("div");$(e).addClass("role-information");f=document.createElement("div");$(f).addClass(b+"__info");$(a).append(c);$(c).prepend(d);$(d).prepend(e);$(e).prepend(f);return a}function z(b){var a=document.createElement("div");$(a).addClass("user__role _hint unselectable").attr({"data-role":b});var d=document.createElement("div");if("boss"===b)throw Error("An unexpected role");if("moderator"===b)$(d).addClass("role-mini role-moderator _hint-up");else if("master"===b)$(d).addClass("role-mini role-master _hint-up");
else throw Error("An unexpected role");$(a).prepend(d);d=document.createElement("div");$(d).addClass("_hint-down");var c=document.createElement("div");$(c).addClass("_hint-down-block");var e=document.createElement("div");$(e).addClass("role-information");var f=document.createElement("div");if("boss"===b)throw Error("An unexpected role");if("moderator"===b)$(f).addClass("moderator__info");else if("master"===b)$(f).addClass("master__info");else throw Error("An unexpected role");$(a).append(d);$(d).prepend(c);
$(c).prepend(e);$(e).prepend(f);return a}function A(b){var a=document.createElement("div");a.classList.add("menu__item");var d=document.createElement("div");d.classList.add("item__block");$(d).attr({"data-role":b,id:"addRole"});if("boss"===b)throw Error("An unexpected role");if("moderator"===b)d.innerText="\u041c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440";else if("master"===b)d.innerText="\u041c\u0430\u0441\u0442\u0435\u0440 \u043e\u043f\u0440\u043e\u0441\u043e\u0432";else throw Error("An unexpected role");
b=document.createElement("div");b.classList.add("item__line");a.prepend(b);a.prepend(d);return a}function t(b){for(var a=0;a<b.length;a++)b[a].finish||$.ajax(b[a].request)}function w(b,a,d){var c=$(".search");$(".snackbar-container").remove();t(m);t(n);$.ajax({url:"load/",type:"get",data:{category:a,search:d},beforeSend:function(e){u&&u.abort();u=e;v.addClass("loading");$(".active-sort[data-category="+b+"]").removeClass("active-sort");$(".category[data-category="+a+"]").addClass("active-sort");b!==
a&&c.prop({disabled:!0})},success:function(e){v.empty().prepend(e.content);"teams"===a?$(".search").attr({placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c..."}):"users"===a&&$(".search").attr({placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430\u043c..."})},complete:function(e,f){b!==a&&c.prop({disabled:!1});v.removeClass("loading");"error"===f&&Snackbar.show({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0434\u0430\u043d\u043d\u044b\u0445.",
textColor:"#ff0000",customClass:"custom center no-animation",showAction:!1,duration:3E3})},error:function(){$(".active-sort[data-category="+a+"]").removeClass("active-sort");$(".category[data-category="+b+"]").addClass("active-sort")}})}var k=$("body"),p=$('input[name="csrfmiddlewaretoken"]').val(),v=$(".content__body"),n=[],m=[],u;k.on("input",".search",function(b){b=$(".active-sort").attr("data-category");var a=$(this).val();w(b,b,a)});k.on("click",".category",function(b){b=$(".active-sort").attr("data-category");
var a=$(this).attr("data-category");if(b!==a){var d=$(".search");d.val("");d=d.val();w(b,a,d)}});window.onbeforeunload=function(){t(m);t(n)};window.onunload=function(){};k.on("click","#removeTeam",function(b){var a=$(this).parent(),d=a.children(".team__info").children(".team__name").children(".team__name").text();b=a.attr("data-team-id");var c;$.ajax({url:"team/"+b+"/remove/",type:"post",data:{csrfmiddlewaretoken:p},beforeSend:function(e,f){if(!n[c]){c=n.length;e.abort();n.push({request:f,finish:!1});
a.addClass("hide");var g=setTimeout(function(){n[c].finish||$.ajax(f)},5E3);Snackbar.show({text:'\u041a\u043e\u043c\u0430\u043d\u0434\u0430 "'+d+'" \u0431\u044b\u043b\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430',customClass:"custom no-animation center",actionText:"\u041e\u0442\u043c\u0435\u043d\u0430",actionTextColor:"#5699FF",width:"910px",pos:"bottom-center",duration:5E3,onActionClick:function(h){clearTimeout(g);$(h).remove();n[c].finish=!0;a.removeClass("hide")}})}},success:function(e){a.remove()},
complete:function(){n[c].finish=!0},error:function(){a.removeClass("hide");Snackbar.show({text:'\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 "'+d+'"',textColor:"#ff0000",customClass:"custom no-animation",showAction:!1,duration:3E3})}})});k.on("click","#dismiss",function(b){var a=$(this).parent().parent().parent().parent(),d=a.children(".user__view").children(".info").children(".info__top").children(".user-href").text();
b=a.attr("data-real-id");var c;$.ajax({url:"user/"+b+"/dismiss/",type:"post",data:{csrfmiddlewaretoken:p},beforeSend:function(e,f){if(!m[c]){c=m.length;e.abort();m.push({request:f,finish:!1});a.addClass("hide");var g=setTimeout(function(){m[c].finish||$.ajax(f)},5E3);Snackbar.show({text:d+" \u0431\u044b\u043b \u0443\u0434\u0430\u043b\u0435\u043d \u0438\u0437 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438",customClass:"custom no-animation center",actionText:"\u041e\u0442\u043c\u0435\u043d\u0430",
actionTextColor:"#5699FF",width:"910px",pos:"bottom-center",duration:5E3,onActionClick:function(h){clearTimeout(g);$(h).remove();m[c].finish=!0;a.removeClass("hide")}})}},success:function(e){a.remove()},complete:function(){m[c].finish=!0},error:function(){a.removeClass("hide");Snackbar.show({text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 "+d,textColor:"#ff0000",customClass:"custom center",
showAction:!1,duration:3E3})}})});var x;k.on("click","._hint-up-click",function(){var b=$(this.closest("._hint-click")),a=$(b).children("._hint-down-click");b.toggleClass("active");a.toggle();x=$(this).parent()});$(window).on("mouseup",function(b){var a=x;"none"===$(a).children("._hint-down-click").css("display")||null!==b.target.closest("._hint-up-click")&&null!==b.target.closest(".position__add")&&$(a).children("._hint-up-click").hasClass("position__add")||null!==b.target.closest(".platform__add")&&
$(a).children("._hint-up-click").hasClass("platform__add")||null!==b.target.closest(".role__add")&&$(a).children("._hint-up-click").hasClass("role__add")||null!==b.target.closest("._hint-down-click")&&!b.target.classList.contains("item__block")||($(a).toggleClass("active"),$(a).children("._hint-down-click").toggle())});k.on("click","#addPlatform",function(b){var a=$(b.target).closest("._hint-click"),d=a.parent(),c=$(this).attr("data-name"),e=$(this).attr("data-id"),f=a.children("._hint-down-click").children("._hint-down-block").children(".menu"),
g=d.parent().parent().parent().parent(),h=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms"),q=h.children(".platform:last");g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/platform/"+e+"/add/",type:"post",data:{csrfmiddlewaretoken:p,namePlatform:c},success:function(B){0===d.children(".platform").length&&d.children(".empty").addClass("hide");$(a).before(l("platform",c,e));$(b.target).parent().remove();1>f.children(".menu__item").length&&$(a).addClass("hide");
1===q.length?q.after(l("platform",c,e,!1)):h.append(l("platform",c,e,!1))},error:function(){}})});k.on("click","#addPosition",function(b){var a=$(b.target).closest("._hint-click"),d=a.parent(),c=$(this).attr("data-name"),e=$(this).attr("data-id"),f=a.children("._hint-down-click").children("._hint-down-block").children(".menu"),g=d.parent().parent().parent().parent(),h=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms"),q=h.children(".position:last");
g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/position/"+e+"/add/",type:"post",data:{csrfmiddlewaretoken:p,namePosition:c},success:function(B){0===d.children(".position").length&&d.children(".empty").addClass("hide");$(a).before(l("position",c,e));$(b.target).parent().remove();1>f.children(".menu__item").length&&$(a).addClass("hide");1===q.length?q.after(l("position",c,e,!1)):h.prepend(l("position",c,e,!1))},error:function(){}})});k.on("click","#addRole",function(b){var a=$(b.target).closest("._hint-click"),
d=a.parent(),c=$(this).attr("data-role"),e=a.children("._hint-down-click").children("._hint-down-block").children(".menu"),f=d.parent().parent().parent().parent().parent(),g=f.children(".user__view").children(".info").children(".info__top");f=f.attr("data-real-id");$.ajax({url:"user/"+f+"/edit/role/add/",type:"post",data:{csrfmiddlewaretoken:p,roleName:c},success:function(h){0===d.children(".user__role").length&&d.children(".empty").addClass("hide");$(a).before(y(c));$(b.target).parent().remove();
1>e.children(".menu__item").length&&$(a).addClass("hide");g.append(z(c))},error:function(){}})});k.on("click","#removePlatform",function(){var b=$(this).parent().parent(),a=b.attr("data-name"),d=b.attr("data-id"),c=b.parent(),e=c.children(".platform__substrate"),f=e.children("._hint-down-click").children("._hint-down-block").children(".menu"),g=c.parent().parent().parent().parent(),h=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms").children('.platform[data-id="'+
d+'"]');g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/platform/"+d+"/remove/",type:"post",data:{csrfmiddlewaretoken:p,namePlatform:a},success:function(q){0===f.children(".menu__item").length&&e.removeClass("hide");f.prepend(r("platform",a,d));b.remove();0===c.children(".platform").length&&c.children(".empty").removeClass("hide");h.remove()},error:function(){}})});k.on("click","#removePosition",function(){var b=$(this).parent().parent(),a=b.attr("data-name"),d=b.attr("data-id"),c=b.parent(),
e=c.children(".position__substrate"),f=e.children("._hint-down-click").children("._hint-down-block").children(".menu"),g=c.parent().parent().parent().parent(),h=g.children(".user__view").children(".info").children(".info__bottom").children(".positions-n-platforms").children('.position[data-id="'+d+'"]');g=g.attr("data-real-id");$.ajax({url:"user/"+g+"/edit/position/"+d+"/remove/",type:"post",data:{csrfmiddlewaretoken:p,namePosition:a},success:function(q){0===f.children(".menu__item").length&&e.removeClass("hide");
f.prepend(r("position",a,d));b.remove();0===c.children(".position").length&&c.children(".empty").removeClass("hide");h.remove()},error:function(){}})});k.on("click","#removeRole",function(){var b=$(this).parent().parent(),a=b.attr("data-role");if("boss"===a)Snackbar.show({text:"\u041d\u0435\u043b\u044c\u0437\u044f \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u043e\u043b\u044c \u0431\u043e\u0441\u0441\u0430",textColor:"#ff1841",showAction:!1,duration:3E3,customClass:"custom center"});else{var d=
b.parent(),c=d.children(".role__substrate"),e=c.children("._hint-down-click").children("._hint-down-block").children(".menu"),f=b.parent().parent().parent().parent().parent().parent(),g=f.children(".user__view").children(".info").children(".info__top").children(".user__role[data-role="+a+"]");f=f.attr("data-real-id");$.ajax({url:"user/"+f+"/edit/role/remove/",type:"post",data:{csrfmiddlewaretoken:p,roleName:a},success:function(h){0===e.children(".menu__item").length&&c.removeClass("hide");e.prepend(A(a));
b.remove();0===d.children(".user__role").length&&d.children(".empty").removeClass("hide");g.remove()},error:function(h){h.message&&Snackbar.show({text:h.message,textColor:"#ff1841",showAction:!1,duration:3E3,customClass:"custom center"})}})}});k.on("click","#edit",function(b){var a=$(this).closest(".user");a.hasClass("user--view")?(b=a[0].getBoundingClientRect(),$(".user--edit").removeClass("user--edit").addClass("user--view"),a.removeClass("user--view").addClass("user--edit"),a=a[0].getBoundingClientRect(),
window.scrollBy(0,-(b.y-a.y))):a.hasClass("user--edit")&&a.removeClass("user--edit").addClass("user--view")});k.click(function(b){var a=$(".user--edit");0<a.length&&0===$(b.target).closest(".scroll-top").length&&0===$(b.target).closest(".header__content").length&&$(b.target).closest(".user").attr("data-real-id")!==a.attr("data-real-id")&&a.children(".user__edit").children(".edit__up").children(".actions").children("#edit").trigger("click")});$(".category[data-category=teams]").trigger("click")});
